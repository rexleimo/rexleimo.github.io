<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>A Survival Guide to Zig Performance Profiling on Apple Silicon (M1/M2) | Ê¢¶ÂÖΩÁºñÁ®ã</title><meta name=keywords content="Zig,Performance,Apple Silicon,macOS,Profiling"><meta name=description content="Performance profiling for Zig on Apple Silicon (M1/M2) can be challenging as common tools like perf and valgrind are not supported. This guide introduces alternatives like Samply, poop, and Tracy to help you analyze and optimize your Zig code on macOS."><meta name=author content="Rexai Programming"><link rel=canonical href=https://rexai.top/news/zig-profiling-on-apple-silicon-survival-guide/><link crossorigin=anonymous href=/assets/css/stylesheet.852d08305fd9657bd0c1817a6ba86d4d8a66d40bbd25a67d45a8f93eb25903a1.css integrity="sha256-hS0IMF/ZZXvQwYF6a6htTYpm1Au9JaZ9Raj5PrJZA6E=" rel="preload stylesheet" as=style><link rel=icon href=https://rexai.top/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://rexai.top/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://rexai.top/favicon-32x32.png><link rel=apple-touch-icon href=https://rexai.top/apple-touch-icon.png><link rel=mask-icon href=https://rexai.top/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh-cn href=https://rexai.top/zh-cn/news/zig-profiling-on-apple-silicon-survival-guide/><link rel=alternate hreflang=en href=https://rexai.top/news/zig-profiling-on-apple-silicon-survival-guide/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><style>.promotion-section{margin-top:2rem;text-align:center}.promotion-section h3{margin-bottom:1.5rem;color:var(--primary);font-size:1.25rem}.qr-codes{display:flex;gap:2rem;justify-content:center;flex-wrap:wrap}.qr-item{text-align:center}.qr-item img{width:150px;height:150px;border:1px solid #ddd;border-radius:8px;padding:8px;background:#fff;box-shadow:0 2px 8px rgba(0,0,0,.1);transition:transform .2s}.qr-item img:hover{transform:scale(1.05)}.qr-item p{margin-top:.5rem;font-size:.9rem;color:var(--secondary);font-weight:500}@media(max-width:768px){.qr-codes{flex-direction:column;align-items:center;gap:1rem}.qr-item img{width:120px;height:120px}}</style><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-K6VQRF8T")</script><script data-name=BMC-Widget data-cfasync=false src=https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js data-id=winbbryz data-description="Support me on Buy me a coffee!" data-message data-color=#FF813F data-position=Right data-x_margin=18 data-y_margin=18></script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K6VQRF8T" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><meta property="og:url" content="https://rexai.top/news/zig-profiling-on-apple-silicon-survival-guide/"><meta property="og:site_name" content="Ê¢¶ÂÖΩÁºñÁ®ã"><meta property="og:title" content="A Survival Guide to Zig Performance Profiling on Apple Silicon (M1/M2)"><meta property="og:description" content="Performance profiling for Zig on Apple Silicon (M1/M2) can be challenging as common tools like perf and valgrind are not supported. This guide introduces alternatives like Samply, poop, and Tracy to help you analyze and optimize your Zig code on macOS."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="news"><meta property="article:published_time" content="2025-08-01T00:00:00+00:00"><meta property="article:modified_time" content="2025-08-01T00:00:00+00:00"><meta property="article:tag" content="Zig"><meta property="article:tag" content="Performance"><meta property="article:tag" content="Apple Silicon"><meta property="article:tag" content="MacOS"><meta property="article:tag" content="Profiling"><meta name=twitter:card content="summary"><meta name=twitter:title content="A Survival Guide to Zig Performance Profiling on Apple Silicon (M1/M2)"><meta name=twitter:description content="Performance profiling for Zig on Apple Silicon (M1/M2) can be challenging as common tools like perf and valgrind are not supported. This guide introduces alternatives like Samply, poop, and Tracy to help you analyze and optimize your Zig code on macOS."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"News","item":"https://rexai.top/news/"},{"@type":"ListItem","position":2,"name":"A Survival Guide to Zig Performance Profiling on Apple Silicon (M1/M2)","item":"https://rexai.top/news/zig-profiling-on-apple-silicon-survival-guide/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"A Survival Guide to Zig Performance Profiling on Apple Silicon (M1/M2)","name":"A Survival Guide to Zig Performance Profiling on Apple Silicon (M1\/M2)","description":"Performance profiling for Zig on Apple Silicon (M1/M2) can be challenging as common tools like perf and valgrind are not supported. This guide introduces alternatives like Samply, poop, and Tracy to help you analyze and optimize your Zig code on macOS.","keywords":["Zig","Performance","Apple Silicon","macOS","Profiling"],"articleBody":"Profiling Zig on Apple Silicon (M1/M2): A Survival Guide Hey there! If you‚Äôre rocking a shiny new Apple Silicon Mac and diving into Zig development, congratulations! You‚Äôve chosen a path that‚Äôs both scenic and fraught with challenges.\nYou‚Äôll quickly discover a harsh reality: when you need to figure out why your code is slow, you‚Äôll feel like you‚Äôre stranded in a vast performance analysis desert. The gods of profiling on Linux‚Äîperf, valgrind, a fully-functional tracy‚Äîeither don‚Äôt work well or are completely absent on macOS.\nperf? That‚Äôs a Linux kernel native, it‚Äôs not acquainted with your aarch64 macOS. valgrind? Sorry, it doesn‚Äôt play well with arm64 macOS either. tracy? It runs, but its most crucial feature, call-stack sampling, is crippled, like a toothless tiger.\nFeeling like your M2 Pro isn‚Äôt so ‚Äúpro‚Äù anymore? Don‚Äôt give up just yet. Even in this desert, there are a few oases. Today, I‚Äôll introduce you to the ‚Äúheroes‚Äù who can help you out on Apple‚Äôs new chips.\nThe Quick-Draw: Samply When you need a quick ‚Äúhealth check‚Äù on your program to see what it‚Äôs busy doing, Samply is the cowboy that draws its gun without a second thought.\nIt‚Äôs a sampling profiler that, by default, takes a snapshot of your program‚Äôs stack every millisecond (1000Hz), whether your CPU is idle or churning. Best of all, it relies on Apple‚Äôs native Mach interface and uses the Firefox Profiler for its UI, which is feature-rich with flame graphs, call trees, and source code views.\nHow to hire this gunslinger? Just one line with Homebrew: brew install samply\nHow to use it? Let it launch your program directly: samply record Or attach to an already running process (requires some extra setup): samply record -p In a nutshell: Your go-to scout for everyday performance issues. It‚Äôs fast, intuitive, and easy to use.\nThe ‚ÄúEarthy‚Äù Powerhouse: poop You read that right. The tool is called poop (short for Performance Optimizer Observation Platform). Don‚Äôt laugh; this is a powerful tool crafted by the creator of Zig, Andrew Kelley himself.\nThe name might be a bit too down-to-earth, but its power will blow you away. It doesn‚Äôt just look at time spent; it goes down to the hardware level, telling you things like ‚Äúhow many times branch prediction failed‚Äù or ‚Äúhow many instructions were executed.‚Äù When you want to do a precise performance comparison between two code changes, poop is your ultimate referee.\nHowever, this powerhouse is a bit picky. The official poop depends on perf, so it‚Äôs a no-go on macOS. Fortunately, a community hero has forked it to run on Apple Silicon using Apple‚Äôs private kperf framework.\nHow to summon this hidden master? You‚Äôll need to clone it from a specific branch and build it manually (check the original source for detailed steps, it‚Äôs a bit of a hassle but totally worth it).\nHow to use it? Since it uses private APIs, it requires root privileges: sudo poop ... It will run and compare the hardware performance counters for these commands, telling you which version is truly ‚Äúfaster.‚Äù In a nutshell: Weird name, but it‚Äôs the indispensable judge for iterative performance optimization.\nThe Beautiful but ‚ÄúFlawed‚Äù Artist: Tracy Tracy is like a highly skilled and flamboyant artist. It‚Äôs an instrumentation and sampling profiler with an incredibly powerful UI that supports remote profiling and has an overwhelming number of features.\nTheoretically, you could use it for very detailed performance dissection of a long-running program. But reality is harsh. On the Apple Silicon stage, this artist has forgotten half of its moves‚Äîits call-stack sampling feature is missing here.\nThis means you can still use its powerful instrumentation features (by manually adding probes in your code), but you won‚Äôt get that automatic, big-picture stack information. This makes the integration process on macOS quite tedious. You‚Äôll need to modify your build.zig, and manually add Tracy‚Äôs client library and various macros to your code.\nIn a nutshell: If you need pixel-perfect manual instrumentation and don‚Äôt mind a complex setup, Tracy is still a decent choice. But for most scenarios, its limitations on Apple Silicon are a major drawback.\nThe Official ‚ÄúOld-Timer‚Äù: Apple Instruments Finally, let‚Äôs talk about Apple‚Äôs own creation: Instruments.\nAs the official tool, its power is unquestionable. CPU analysis, hardware counters, GPU usage, network traffic‚Ä¶ it can do almost everything. The jobs that samply and poop do, Instruments can basically do them all, and more.\nBut it has a glaring problem: It‚Äôs SLOW!\nA tool meant for performance analysis having performance issues itself is a joke that could make me laugh all day. Its UI and the entire application feel heavy, and both launching and exporting data are painfully slow. In the original author‚Äôs words, a program that runs in 4 seconds took 40 seconds to run 3 times and export an XML with Instruments!\nIn a nutshell: It‚Äôs your last resort. Only when other tools can‚Äôt meet your demanding needs should you bring out this powerful but sluggish old master.\nConclusion: Survive the Desert by Choosing the Right Tool Alright, folks, you have the treasure map. Although the Zig performance analysis ecosystem on Apple Silicon isn‚Äôt as rich as on Linux, we are by no means helpless.\nWant a quick look? Go for Samply. Need to compare optimization effects precisely? Unleash poop. Want to monitor specific code sections with long-term instrumentation? Look into Tracy. Out of options? Be patient and open up Apple Instruments. On this journey of exploration, we are all pioneers carving a new path.\n","wordCount":"919","inLanguage":"en","datePublished":"2025-08-01T00:00:00Z","dateModified":"2025-08-01T00:00:00Z","author":{"@type":"Person","name":"Rexai Programming"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://rexai.top/news/zig-profiling-on-apple-silicon-survival-guide/"},"publisher":{"@type":"Organization","name":"Ê¢¶ÂÖΩÁºñÁ®ã","logo":{"@type":"ImageObject","url":"https://rexai.top/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://rexai.top/ accesskey=h title="Ê¢¶ÂÖΩÁºñÁ®ã (Alt + H)">Ê¢¶ÂÖΩÁºñÁ®ã</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://rexai.top/zh-cn/ title=‰∏≠Êñá aria-label=‰∏≠Êñá>Zh-Cn</a></li></ul></div></div><ul id=menu><li><a href=https://rexai.top/ title=Home><span>Home</span></a></li><li class=has-submenu><a href=https://rexai.top/tutorials/ title="üìö Tutorials"><span>üìö Tutorials</span>
<span class=submenu-toggle>‚ñº</span></a><ul class=submenu><li><a href=https://rexai.top/tutorials/rust/ title=Rust>Rust</a></li><li><a href=https://rexai.top/tutorials/ai/ title="AI Programming">AI Programming</a></li></ul></li><li><a href=https://rexai.top/tools/ title=Tools><span>Tools</span></a></li><li><a href=https://rexai.top/news/ title="üî• News"><span>üî• News</span></a></li><li><a href=https://rexai.top/tags/ title="üè∑Ô∏è Tags"><span>üè∑Ô∏è Tags</span></a></li><li><a href=https://rexai.top/categories/ title="üìÇ Categories"><span>üìÇ Categories</span></a></li></ul></nav></header><style>.has-submenu{position:relative}#menu{overflow:visible !important}#menu li{overflow:visible}.submenu{position:absolute;top:100%;left:0;background:var(--theme);border:1px solid var(--border);border-radius:8px;box-shadow:0 4px 6px -1px rgba(0,0,0,.1);min-width:180px;z-index:1000;list-style:none;display:none;padding:.5rem 0}.submenu li{display:block;margin:0;line-height:1.5}#menu .submenu li+li{margin-inline-start:0}.submenu a{display:block;padding:.75rem 1rem;color:var(--secondary);text-decoration:none;transition:all .2s ease;border-radius:0}.submenu a:hover{background:var(--entry);color:var(--primary)}.has-submenu:hover .submenu{display:block !important}.submenu-toggle{margin-left:.25rem;font-size:.75rem;transition:transform .2s ease;display:inline-block}.has-submenu:hover .submenu-toggle{transform:rotate(180deg)}@media(max-width:768px){.submenu{position:static;box-shadow:none;border:none;background:var(--entry);margin-top:0;margin-left:1rem;display:none;padding:0}.has-submenu.active .submenu{display:block}.submenu-toggle{cursor:pointer}}</style><script>window.innerWidth<=768&&document.querySelectorAll(".has-submenu").forEach(e=>{const n=e.querySelector("a"),t=e.querySelector(".submenu-toggle");t&&(t.addEventListener("click",function(t){t.preventDefault(),e.classList.toggle("active")}),n.addEventListener("click",function(t){e.classList.contains("has-submenu")&&(t.preventDefault(),e.classList.toggle("active"))}))})</script><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">A Survival Guide to Zig Performance Profiling on Apple Silicon (M1/M2)</h1><div class=post-description>Performance profiling for Zig on Apple Silicon (M1/M2) can be challenging as common tools like perf and valgrind are not supported. This guide introduces alternatives like Samply, poop, and Tracy to help you analyze and optimize your Zig code on macOS.</div><div class=post-meta><span title='2025-08-01 00:00:00 +0000 UTC'>August 1, 2025</span>&nbsp;¬∑&nbsp;5 min&nbsp;¬∑&nbsp;919 words&nbsp;¬∑&nbsp;Rexai Programming&nbsp;|&nbsp;Translations:<ul class=i18n_list><li><a href=https://rexai.top/zh-cn/news/zig-profiling-on-apple-silicon-survival-guide/>Zh-Cn</a></li></ul></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#profiling-zig-on-apple-silicon-m1m2-a-survival-guide aria-label="Profiling Zig on Apple Silicon (M1/M2): A Survival Guide">Profiling Zig on Apple Silicon (M1/M2): A Survival Guide</a><ul><li><a href=#the-quick-draw-samply aria-label="The Quick-Draw: Samply">The Quick-Draw: Samply</a></li><li><a href=#the aria-label="The &ldquo;Earthy&rdquo; Powerhouse: poop">The &ldquo;Earthy&rdquo; Powerhouse: poop</a></li><li><a href=#the-beautiful-but aria-label="The Beautiful but &ldquo;Flawed&rdquo; Artist: Tracy">The Beautiful but &ldquo;Flawed&rdquo; Artist: Tracy</a></li><li><a href=#the-official aria-label="The Official &ldquo;Old-Timer&rdquo;: Apple Instruments">The Official &ldquo;Old-Timer&rdquo;: Apple Instruments</a></li><li><a href=#conclusion-survive-the-desert-by-choosing-the-right-tool aria-label="Conclusion: Survive the Desert by Choosing the Right Tool">Conclusion: Survive the Desert by Choosing the Right Tool</a></li></ul></li></ul></div></details></div><div class=post-content><h1 id=profiling-zig-on-apple-silicon-m1m2-a-survival-guide>Profiling Zig on Apple Silicon (M1/M2): A Survival Guide<a hidden class=anchor aria-hidden=true href=#profiling-zig-on-apple-silicon-m1m2-a-survival-guide>#</a></h1><p>Hey there! If you&rsquo;re rocking a shiny new Apple Silicon Mac and diving into Zig development, congratulations! You&rsquo;ve chosen a path that&rsquo;s both scenic and fraught with challenges.</p><p>You&rsquo;ll quickly discover a harsh reality: when you need to figure out why your code is slow, you&rsquo;ll feel like you&rsquo;re stranded in a vast performance analysis desert. The gods of profiling on Linux‚Äî<code>perf</code>, <code>valgrind</code>, a fully-functional <code>tracy</code>‚Äîeither don&rsquo;t work well or are completely absent on macOS.</p><p><code>perf</code>? That&rsquo;s a Linux kernel native, it&rsquo;s not acquainted with your aarch64 macOS. <code>valgrind</code>? Sorry, it doesn&rsquo;t play well with arm64 macOS either. <code>tracy</code>? It runs, but its most crucial feature, call-stack sampling, is crippled, like a toothless tiger.</p><p>Feeling like your M2 Pro isn&rsquo;t so &ldquo;pro&rdquo; anymore? Don&rsquo;t give up just yet. Even in this desert, there are a few oases. Today, I&rsquo;ll introduce you to the &ldquo;heroes&rdquo; who can help you out on Apple&rsquo;s new chips.</p><h2 id=the-quick-draw-samply><strong>The Quick-Draw: Samply</strong><a hidden class=anchor aria-hidden=true href=#the-quick-draw-samply>#</a></h2><p>When you need a quick &ldquo;health check&rdquo; on your program to see what it&rsquo;s busy doing, <strong>Samply</strong> is the cowboy that draws its gun without a second thought.</p><p><img alt="Samply flamegraph showing performance distribution of function calls" loading=lazy src=/news/zig-profiling-on-apple-silicon-survival-guide/2025-08-01-11-16-37.png></p><p>It&rsquo;s a sampling profiler that, by default, takes a snapshot of your program&rsquo;s stack every millisecond (1000Hz), whether your CPU is idle or churning. Best of all, it relies on Apple&rsquo;s native Mach interface and uses the Firefox Profiler for its UI, which is feature-rich with flame graphs, call trees, and source code views.</p><p><strong>How to hire this gunslinger?</strong>
Just one line with Homebrew:
<code>brew install samply</code></p><p><strong>How to use it?</strong>
Let it launch your program directly:
<code>samply record &lt;your_program></code>
Or attach to an already running process (requires some extra setup):
<code>samply record -p &lt;pid></code></p><p><strong>In a nutshell:</strong> Your go-to scout for everyday performance issues. It&rsquo;s fast, intuitive, and easy to use.</p><h2 id=the><strong>The &ldquo;Earthy&rdquo; Powerhouse: poop</strong><a hidden class=anchor aria-hidden=true href=#the>#</a></h2><p>You read that right. The tool is called <strong>poop</strong> (short for Performance Optimizer Observation Platform). Don&rsquo;t laugh; this is a powerful tool crafted by the creator of Zig, Andrew Kelley himself.</p><p>The name might be a bit too down-to-earth, but its power will blow you away. It doesn&rsquo;t just look at time spent; it goes down to the hardware level, telling you things like &ldquo;how many times branch prediction failed&rdquo; or &ldquo;how many instructions were executed.&rdquo; When you want to do a precise performance comparison between two code changes, poop is your ultimate referee.</p><p>However, this powerhouse is a bit picky. The official <code>poop</code> depends on <code>perf</code>, so it&rsquo;s a no-go on macOS. Fortunately, a community hero has forked it to run on Apple Silicon using Apple&rsquo;s private <code>kperf</code> framework.</p><p><strong>How to summon this hidden master?</strong>
You&rsquo;ll need to clone it from a specific branch and build it manually (check the original source for detailed steps, it&rsquo;s a bit of a hassle but totally worth it).</p><p><strong>How to use it?</strong>
Since it uses private APIs, it requires root privileges:
<code>sudo poop &lt;command1> &lt;command2> ...</code>
It will run and compare the hardware performance counters for these commands, telling you which version is truly &ldquo;faster.&rdquo;
<img alt="Terminal output of the poop tool, comparing performance counters of two commands" loading=lazy src=/news/zig-profiling-on-apple-silicon-survival-guide/2025-08-01-11-18-17.png></p><p><strong>In a nutshell:</strong> Weird name, but it&rsquo;s the indispensable judge for iterative performance optimization.</p><h2 id=the-beautiful-but><strong>The Beautiful but &ldquo;Flawed&rdquo; Artist: Tracy</strong><a hidden class=anchor aria-hidden=true href=#the-beautiful-but>#</a></h2><p><strong>Tracy</strong> is like a highly skilled and flamboyant artist. It&rsquo;s an instrumentation and sampling profiler with an incredibly powerful UI that supports remote profiling and has an overwhelming number of features.</p><p>Theoretically, you could use it for very detailed performance dissection of a long-running program. But reality is harsh. On the Apple Silicon stage, this artist has forgotten half of its moves‚Äîits <strong>call-stack sampling feature is missing here</strong>.</p><p>This means you can still use its powerful instrumentation features (by manually adding probes in your code), but you won&rsquo;t get that automatic, big-picture stack information. This makes the integration process on macOS quite tedious. You&rsquo;ll need to modify your <code>build.zig</code>, and manually add Tracy&rsquo;s client library and various macros to your code.</p><p><strong>In a nutshell:</strong> If you need pixel-perfect manual instrumentation and don&rsquo;t mind a complex setup, Tracy is still a decent choice. But for most scenarios, its limitations on Apple Silicon are a major drawback.</p><h2 id=the-official><strong>The Official &ldquo;Old-Timer&rdquo;: Apple Instruments</strong><a hidden class=anchor aria-hidden=true href=#the-official>#</a></h2><p>Finally, let&rsquo;s talk about Apple&rsquo;s own creation: <strong>Instruments</strong>.</p><p><img alt="Apple Instruments&rsquo; CPU Profiler interface, showing detailed performance data and call trees" loading=lazy src=/news/zig-profiling-on-apple-silicon-survival-guide/2025-08-01-11-20-02.png></p><p>As the official tool, its power is unquestionable. CPU analysis, hardware counters, GPU usage, network traffic&mldr; it can do almost everything. The jobs that <code>samply</code> and <code>poop</code> do, Instruments can basically do them all, and more.</p><p>But it has a glaring problem: <strong>It&rsquo;s SLOW!</strong></p><p>A tool meant for performance analysis having performance issues itself is a joke that could make me laugh all day. Its UI and the entire application feel heavy, and both launching and exporting data are painfully slow. In the original author&rsquo;s words, a program that runs in 4 seconds took 40 seconds to run 3 times and export an XML with Instruments!</p><p><strong>In a nutshell:</strong> It&rsquo;s your last resort. Only when other tools can&rsquo;t meet your demanding needs should you bring out this powerful but sluggish old master.</p><h2 id=conclusion-survive-the-desert-by-choosing-the-right-tool><strong>Conclusion: Survive the Desert by Choosing the Right Tool</strong><a hidden class=anchor aria-hidden=true href=#conclusion-survive-the-desert-by-choosing-the-right-tool>#</a></h2><p>Alright, folks, you have the treasure map. Although the Zig performance analysis ecosystem on Apple Silicon isn&rsquo;t as rich as on Linux, we are by no means helpless.</p><ul><li>Want a quick look? Go for <strong>Samply</strong>.</li><li>Need to compare optimization effects precisely? Unleash <strong>poop</strong>.</li><li>Want to monitor specific code sections with long-term instrumentation? Look into <strong>Tracy</strong>.</li><li>Out of options? Be patient and open up <strong>Apple Instruments</strong>.</li></ul><p>On this journey of exploration, we are all pioneers carving a new path.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://rexai.top/tags/zig/>Zig</a></li><li><a href=https://rexai.top/tags/performance/>Performance</a></li><li><a href=https://rexai.top/tags/apple-silicon/>Apple Silicon</a></li><li><a href=https://rexai.top/tags/macos/>MacOS</a></li><li><a href=https://rexai.top/tags/profiling/>Profiling</a></li></ul></footer></article></main><footer class=footer><span>¬© <a href=https://rexai.top/>Ê¢¶ÂÖΩÁºñÁ®ã</a></span> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>