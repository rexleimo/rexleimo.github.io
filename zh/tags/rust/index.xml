<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Rust on 梦兽编程</title><link>https://rexai.top/zh/tags/rust/</link><description>Recent content in Rust on 梦兽编程</description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Thu, 19 Dec 2024 10:00:00 +0800</lastBuildDate><atom:link href="https://rexai.top/zh/tags/rust/index.xml" rel="self" type="application/rss+xml"/><item><title>Rust 错误处理终极指南：告别 unwrap()，掌握 Result 和 Option 的正确姿势</title><link>https://rexai.top/zh/tutorials/rust/rust-error-handling-guide-result-option-vs-unwrap/</link><pubDate>Thu, 19 Dec 2024 10:00:00 +0800</pubDate><guid>https://rexai.top/zh/tutorials/rust/rust-error-handling-guide-result-option-vs-unwrap/</guid><description>&lt;h1 id="还在用-unwrap同事们都偷偷在学这套-rust-错误处理组合拳再不看就晚了">还在用 unwrap()？同事们都偷偷在学这套 Rust 错误处理&amp;quot;组合拳&amp;quot;，再不看就晚了！&lt;/h1>
&lt;p>你好，未来的 Rust 大神。我知道你为何而来。你听说 Rust 是一头性能猛兽，安全可靠，于是满怀激情地跳了进来。然后，你遇到了它的第一个下马威——错误处理。&lt;/p>
&lt;p>和那些用 try-catch 给你铺好柔软安全网的语言不同，Rust 直接塞给你一把利剑和一个盾牌——Result 和 Option。它对你说：“上吧，勇士！命运掌握在你自己手中。”&lt;/p>
&lt;p>很多新手没走两步，就掉进了各种陷阱。但你不同，因为你正在阅读这篇文章。今天，我就带你拆解 Rust 错误处理的五大“天坑”，并传授你一套能让同事们惊呼“优雅”的武林秘籍。&lt;/p>
&lt;h2 id="目录">目录&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://rexai.top/zh/tutorials/rust/rust-error-handling-guide-result-option-vs-unwrap/#%e7%ac%ac%e4%b8%80%e5%bc%8f%e6%88%92%e6%8e%89%e5%bf%83%e9%ad%94-unwrap">第一式：戒掉心魔 unwrap()&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://rexai.top/zh/tutorials/rust/rust-error-handling-guide-result-option-vs-unwrap/#%e7%ac%ac%e4%ba%8c%e5%bc%8f%e6%ad%a3%e8%a7%86%e7%bc%96%e8%af%91%e5%99%a8%e7%9a%84%e5%94%a0%e5%8f%a8">第二式：正视编译器的&amp;quot;唠叨&amp;quot;&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://rexai.top/zh/tutorials/rust/rust-error-handling-guide-result-option-vs-unwrap/#%e7%ac%ac%e4%b8%89%e5%bc%8f%e5%91%8a%e5%88%ab%e9%87%91%e5%ad%97%e5%a1%94%e7%94%a8--%e5%8f%98%e8%ba%ab%e4%bc%98%e9%9b%85%e9%ad%94%e6%9c%af%e5%b8%88">第三式：告别&amp;quot;金字塔&amp;quot;，用 ? 变身优雅魔术师&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://rexai.top/zh/tutorials/rust/rust-error-handling-guide-result-option-vs-unwrap/#%e7%ac%ac%e5%9b%9b%e5%bc%8f%e4%b8%8d%e5%9c%a8%e5%85%ac%e5%85%b1%e5%9c%ba%e6%89%80%e5%bc%95%e7%88%86%e7%82%b8%e5%bc%b9">第四式：不在公共场所&amp;quot;引爆炸弹&amp;quot;&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://rexai.top/zh/tutorials/rust/rust-error-handling-guide-result-option-vs-unwrap/#%e7%ac%ac%e4%ba%94%e5%bc%8f%e5%88%86%e6%b8%85-option-%e5%92%8c-result">第五式：分清 Option 和 Result&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://rexai.top/zh/tutorials/rust/rust-error-handling-guide-result-option-vs-unwrap/#%e6%80%bb%e7%bb%93%e4%bd%a0%e7%9a%84%e5%b0%81%e7%a5%9e%e4%b9%8b%e8%b7%af">总结：你的&amp;quot;封神&amp;quot;之路&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="第一式戒掉心魔-unwrap别让你的程序自爆">第一式：戒掉心魔 unwrap()，别让你的程序&amp;quot;自爆&amp;quot;&lt;/h2>
&lt;p>每个 Rust 新手都曾对 .unwrap() 爱不释手。它就像恶魔的低语，在你耳边说：“别担心，这里肯定有值，直接拆开用吧！” 于是，你写下了这样的“YOLO 代码”：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rs" data-lang="rs">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fn&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">let&lt;/span> input &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;hello&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// 砰！你的程序在这里灰飞烟灭
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">let&lt;/span> num: &lt;span style="color:#66d9ef">i32&lt;/span> &lt;span style="color:#f92672">=&lt;/span> input.parse().unwrap(); 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>这可不是什么可以被捕获的“异常”，这是程序的“猝死”，是 panic!，是拉响手雷与代码同归于尽。在生产环境里这么干，你的同事会顺着网线来揍你。&lt;/p>
&lt;p>大神操作：&lt;/p>
&lt;p>真正的勇士，敢于直面可能发生的“错误”。&lt;/p>
&lt;p>用 match 来做一次精密的“外科手术”：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rs" data-lang="rs">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fn&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">let&lt;/span> input &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;hello&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">match&lt;/span> input.parse::&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#66d9ef">i32&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Ok(num) &lt;span style="color:#f92672">=&amp;gt;&lt;/span> &lt;span style="color:#a6e22e">println!&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;转换成功: &lt;/span>&lt;span style="color:#e6db74">{num}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Err(e) &lt;span style="color:#f92672">=&amp;gt;&lt;/span> &lt;span style="color:#a6e22e">println!&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;出错了，凡人: &lt;/span>&lt;span style="color:#e6db74">{e}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>或者，给它一个“备胎”，如果失败了就用默认值：&lt;/p></description></item></channel></rss>