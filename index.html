<!doctype html><html lang=zh-cn dir=auto><head><meta name=generator content="Hugo 0.148.2"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>梦兽编程</title><meta name=description content="还在为编程学习感到迷茫？来梦兽编程！我们分享高效的编程思维与实用的项目教程，专注于解决你的技术难点，让能力和认知同步升级。"><meta name=author content="梦兽编程"><link rel=canonical href=https://rexai.top/><link crossorigin=anonymous href=/assets/css/stylesheet.36a35dd316f612e0d26c90cd90313d15705d24943d7cf2559674e92b21704616.css integrity="sha256-NqNd0xb2EuDSbJDNkDE9FXBdJJQ9fPJVlnTpKyFwRhY=" rel="preload stylesheet" as=style><link rel=icon href=https://rexai.top/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://rexai.top/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://rexai.top/favicon-32x32.png><link rel=apple-touch-icon href=https://rexai.top/apple-touch-icon.png><link rel=mask-icon href=https://rexai.top/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://rexai.top/index.xml><link rel=alternate hreflang=zh-cn href=https://rexai.top/><link rel=alternate hreflang=en href=https://rexai.top/en/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=/css/extended/modern-typography.min.css integrity><style>.promotion-section{margin-top:3rem;padding:2rem;text-align:center;background:linear-gradient(135deg,rgba(59,130,246,5%) 0%,rgba(139,92,246,5%) 100%);border-radius:16px;border:1px solid rgba(59,130,246,.1);position:relative;overflow:hidden}.promotion-section::before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#3b82f6,#8b5cf6,#06b6d4);border-radius:16px 16px 0 0}.promotion-section h3{margin-bottom:1.5rem;color:var(--primary);font-size:1.5rem;font-weight:600;background:linear-gradient(135deg,#3b82f6,#8b5cf6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.qr-codes{display:flex;gap:2.5rem;justify-content:center;flex-wrap:wrap;margin-top:2rem}.qr-item{text-align:center;position:relative;transition:transform .3s ease}.qr-item:hover{transform:translateY(-5px)}.qr-item img{width:160px;height:160px;border:2px solid #e5e7eb;border-radius:16px;padding:12px;background:#fff;box-shadow:0 4px 20px rgba(0,0,0,8%),0 1px 3px rgba(0,0,0,.1);transition:all .3s ease;position:relative;overflow:hidden}.qr-item img::before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg,rgba(59,130,246,.1),rgba(139,92,246,.1));opacity:0;transition:opacity .3s ease;z-index:1}.qr-item:hover img{border-color:#3b82f6;box-shadow:0 8px 30px rgba(59,130,246,.2),0 2px 8px rgba(0,0,0,.1);transform:scale(1.02)}.qr-item:hover img::before{opacity:1}.qr-item p{margin-top:1rem;font-size:1rem;color:var(--secondary);font-weight:500;position:relative}.modern-button{display:inline-flex;align-items:center;padding:.75rem 1.5rem;background:linear-gradient(135deg,#3b82f6,#8b5cf6);color:#fff;text-decoration:none;border-radius:12px;font-weight:500;transition:all .3s ease;box-shadow:0 4px 12px rgba(59,130,246,.3);position:relative;overflow:hidden}.modern-button::before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .6s ease}.modern-button:hover::before{left:100%}.modern-button:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(59,130,246,.4)}@keyframes fadeInUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.post-content>*{animation:fadeInUp .6s ease-out;animation-fill-mode:both}.post-content>*:nth-child(1){animation-delay:.1s}.post-content>*:nth-child(2){animation-delay:.2s}.post-content>*:nth-child(3){animation-delay:.3s}.post-content>*:nth-child(4){animation-delay:.4s}@media(max-width:768px){.promotion-section{margin:2rem -1rem;border-radius:0;padding:1.5rem 1rem}.qr-codes{flex-direction:column;align-items:center;gap:1.5rem}.qr-item img{width:140px;height:140px;padding:10px}.promotion-section h3{font-size:1.25rem}}.reading-progress{position:fixed;top:0;left:0;width:0%;height:3px;background:linear-gradient(90deg,#3b82f6,#8b5cf6,#06b6d4);z-index:999;transition:width .1s ease}.post-actions{margin-top:2.5rem;padding-top:1.25rem;border-top:1px dashed var(--border)}.post-actions__group{display:flex;flex-wrap:wrap;gap:.75rem 1rem;align-items:center}.post-actions__item{display:inline-flex;align-items:center}*{transition:background-color .3s ease,color .3s ease,border-color .3s ease}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{background:var(--theme)}::-webkit-scrollbar-thumb{background:linear-gradient(135deg,#3b82f6,#8b5cf6);border-radius:4px}::-webkit-scrollbar-thumb:hover{background:linear-gradient(135deg,#2563eb,#7c3aed)}</style><script>document.addEventListener("DOMContentLoaded",function(){const e=document.createElement("div");e.className="reading-progress",document.body.appendChild(e);function t(){const t=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.scrollHeight-document.documentElement.clientHeight,s=t/n*100;e.style.width=s+"%"}window.addEventListener("scroll",t),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})})})})</script><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-K6VQRF8T")</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K6VQRF8T" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-62VF26DEY6"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-62VF26DEY6")</script><meta property="og:url" content="https://rexai.top/"><meta property="og:site_name" content="梦兽编程"><meta property="og:title" content="梦兽编程"><meta property="og:description" content="还在为编程学习感到迷茫？来梦兽编程！我们分享高效的编程思维与实用的项目教程，专注于解决你的技术难点，让能力和认知同步升级。"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="梦兽编程"><meta name=twitter:description content="还在为编程学习感到迷茫？来梦兽编程！我们分享高效的编程思维与实用的项目教程，专注于解决你的技术难点，让能力和认知同步升级。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"梦兽编程","url":"https://rexai.top/","description":"还在为编程学习感到迷茫？来梦兽编程！我们分享高效的编程思维与实用的项目教程，专注于解决你的技术难点，让能力和认知同步升级。","logo":"https://rexai.top/favicon.ico","sameAs":[]}</script></head><body class=list id=top><header class=header><nav class=nav><div class=logo><a href=https://rexai.top/ accesskey=h title="梦兽编程 (Alt + H)">梦兽编程</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://rexai.top/en/ title=:en: aria-label=:en:>En</a></li></ul></div></div><button class=menu-toggle id=menu-toggle aria-label=打开菜单 aria-controls=menu aria-expanded=false>
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><ul id=menu role=menubar><li role=none><a href=https://rexai.top/ title=首页 role=menuitem class=is-current><span class=active>首页</span></a></li><li class=has-submenu role=none><a href=https://rexai.top/tutorials/ title="📚 教程" role=menuitem><span>📚 教程</span>
<span class=submenu-toggle role=button tabindex=0 aria-expanded=false aria-haspopup=true>▼</span></a><ul class=submenu role=menu><li role=none><a href=https://rexai.top/tutorials/rust/ title=Rust role=menuitem>Rust</a></li><li role=none><a href=https://rexai.top/tutorials/ai/ title=AI编程 role=menuitem>AI编程</a></li></ul></li><li role=none><a href=https://rexai.top/tools/ title=工具精选 role=menuitem><span>工具精选</span></a></li><li role=none><a href=https://rexai.top/news/ title="🔥 资讯" role=menuitem><span>🔥 资讯</span></a></li><li role=none><a href=https://rexai.top/tags/ title=🏷️标签 role=menuitem><span>🏷️标签</span></a></li><li role=none><a href=https://rexai.top/categories/ title=📂分类 role=menuitem><span>📂分类</span></a></li></ul><div id=menu-overlay class=menu-overlay hidden></div></nav></header><style>.has-submenu{position:relative}#menu{overflow:visible !important}#menu li{overflow:visible}.submenu{position:absolute;top:100%;left:0;background:var(--theme);border:1px solid var(--border);border-radius:8px;box-shadow:0 4px 6px -1px rgba(0,0,0,.1);min-width:180px;z-index:1000;list-style:none;display:none;padding:.5rem 0}.submenu li{display:block;margin:0;line-height:1.5}#menu .submenu li+li{margin-inline-start:0}.submenu a{display:block;padding:.75rem 1rem;color:var(--secondary);text-decoration:none;transition:all .2s ease;border-radius:0}.submenu a:hover{background:var(--entry);color:var(--primary)}.has-submenu:hover .submenu{display:block !important}.submenu-toggle{margin-left:.25rem;font-size:.75rem;transition:transform .2s ease;display:inline-block}.has-submenu:hover .submenu-toggle{transform:rotate(180deg)}@media(max-width:768px){.menu-toggle{display:inline-flex;align-items:center;justify-content:center;width:44px;height:44px;margin-inline-end:var(--gap);border-radius:8px;border:1px solid var(--border);background:var(--theme);color:var(--primary)}#menu{position:fixed;top:0;right:0;height:100vh;width:82vw;max-width:340px;background:var(--theme);box-shadow:-2px 0 20px rgba(0,0,0,.18);transform:translateX(100%);transition:transform .25s ease;padding:calc(var(--header-height) + 10px)16px 20px;flex-direction:column;gap:4px;overflow-y:auto !important;z-index:1001}body.menu-open #menu{transform:translateX(0)}.menu-overlay{position:fixed;inset:0;background:rgba(0,0,0,.4);opacity:0;pointer-events:none;transition:opacity .2s ease;z-index:1000}body.menu-open .menu-overlay{opacity:1;pointer-events:auto}#menu li+li{margin-inline-start:0}#menu a{padding:12px 8px}.submenu{position:static;box-shadow:none;border:none;background:var(--entry);margin-top:0;margin-left:1rem;display:block;max-height:0;overflow:hidden;padding:0;transition:max-height .25s ease,padding .2s ease}.has-submenu.active .submenu{max-height:1000px;padding:4px 0 6px}.submenu-toggle{cursor:pointer}.has-submenu.active>a .submenu-toggle{transform:rotate(180deg)}}@media(min-width:769px){.menu-toggle{display:none}}.submenu a:focus-visible,#menu a:focus-visible,.menu-toggle:focus-visible,.submenu-toggle:focus-visible{outline:2px solid var(--primary);outline-offset:2px;border-radius:6px}@media(max-width:768px){#menu a.is-current,#menu a.is-current>span{border-bottom:none !important;background:var(--entry);color:var(--primary);border-radius:8px;font-weight:600}#menu a.is-current{padding:10px}#menu a{width:100%;border-radius:8px}#menu .active{border-bottom:none !important}}body.menu-open{overflow:hidden;touch-action:none}</style><script>(function(){const s=document.getElementById("menu"),t=document.getElementById("menu-toggle"),o=document.getElementById("menu-overlay");if(!s||!t||!o)return;const i=()=>window.innerWidth<=768,r=()=>{document.body.classList.add("menu-open"),t.setAttribute("aria-expanded","true"),o.hidden=!1,l()},n=()=>{document.body.classList.remove("menu-open"),t.setAttribute("aria-expanded","false"),o.hidden=!0,d(),t.focus()};t.addEventListener("click",()=>{const e=document.body.classList.contains("menu-open");e?n():r()}),o.addEventListener("click",n),window.addEventListener("keydown",e=>{e.key==="Escape"&&n()}),window.addEventListener("resize",()=>{window.innerWidth>768&&n()});const c=()=>{const e=Array.from(document.querySelectorAll(".has-submenu")),t=t=>{e.forEach(e=>{if(e!==t&&e.classList.contains("active")){e.classList.remove("active");const t=e.querySelector(".submenu-toggle");t&&t.setAttribute("aria-expanded","false")}})};e.forEach(e=>{const o=e.querySelector("a"),n=e.querySelector(".submenu-toggle"),a=e.querySelector(".submenu");if(!n||!a||!o)return;const r=t=>{n.setAttribute("aria-expanded",t?"true":"false"),e.classList.toggle("active",t)},s=()=>{const n=!e.classList.contains("active");n&&t(e),r(n)};n.addEventListener("click",e=>{if(!i())return;e.preventDefault(),e.stopPropagation(),s()}),n.addEventListener("keydown",e=>{if(!i())return;(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),e.stopPropagation(),s())}),o.addEventListener("click",e=>{if(!i())return;e.preventDefault(),e.stopPropagation(),s()})})};let e=[];const a=t=>{if(t.key!=="Tab"||!document.body.classList.contains("menu-open"))return;e=Array.from(s.querySelectorAll('a, button, [tabindex="0"]'));const n=e[0],o=e[e.length-1];if(!n||!o)return;t.shiftKey&&document.activeElement===n?(t.preventDefault(),o.focus()):!t.shiftKey&&document.activeElement===o&&(t.preventDefault(),n.focus())},l=()=>{e=Array.from(s.querySelectorAll('a, button, [tabindex="0"]')),e.length&&e[0].focus(),document.addEventListener("keydown",a)},d=()=>{document.removeEventListener("keydown",a)};c(),s.addEventListener("click",e=>{const t=e.target;if(!(t instanceof Element)||!i())return;const s=t.closest("a");if(!s)return;const o=s.closest("li"),a=o&&o.classList.contains("has-submenu");a||n()})})()</script><main class=main><article class="first-entry home-info"><header class=entry-header><h1>欢迎来到梦兽编程</h1></header><div class=entry-content>启发梦想，成就未来。梦兽编程专注于AI编程的成人教育，从零起步带您掌握未来技能，启航智能时代的无限可能。</div><div class=promotion-section style=margin-top:2rem;text-align:center><h3 style=margin-bottom:1rem>关注我们</h3><div class=qr-codes style=display:flex;gap:2rem;justify-content:center;flex-wrap:wrap><div class=qr-item><img src=/images/wechat-qr.jpg alt=微信公众号二维码 style="width:150px;height:150px;border:1px solid #ddd;border-radius:8px"><p style=margin-top:.5rem;font-size:.9rem;color:#666>微信公众号</p></div><div class=qr-item><img src=/images/assistant-qr.jpg alt=助手二维码 style="width:150px;height:150px;border:1px solid #ddd;border-radius:8px"><p style=margin-top:.5rem;font-size:.9rem;color:#666>学习助手</p></div></div></div><footer class=entry-footer><div class=social-icons></div></footer></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Rust 异步微服务扛洪攻略：限流、背压、批处理、中间件一站讲透</h2></header><div class=entry-content><p>关注梦兽编程微信公众号，轻松了解Rust
周一早高峰的地铁站，人潮汹涌。闸机在入口限流，站台有人数管控，列车会临时加编组，广播把大家调度得井井有条。这一整套“城市级调度”，就是微服务在高并发下要做的事。你的 Rust 服务，也需要同款四道闸门：限流、背压、批处理、以及一脑袋灵光的中间件。
先把结论放在前面。稳定不是“慢”，稳定是让“快”有序地发生。只要闸门装在对的位置，洪水进来都能分流成河。
为什么会堵：异步不等于无限并发 很多人一看到异步，就以为服务器像开挂了一样能无限接单。现实更像外卖平台：订单暴涨那一刻，骑手数量、后厨火力、商家出餐速度，任何一个短板都能卡住整条链路。吞吐永远受制于最慢的环节，排队本身不是原罪，失控排队才是事故的来源。
所以第一原则很简单：别让请求在你不知道的地方悄悄堆积。该拒就拒、该排就排、该攒就攒、该协调就协调。
限流：像地铁闸机一样，按节奏放行 入口限流就是闸机。我们不是不欢迎大家，而是不想一窝蜂冲进站台把人挤翻。限流保护的是你自己和下游依赖，尤其是第三方 API、数据库、或拥贵资源位。
在 Rust 里，基于 Tower 生态可以很优雅地加一层“闸机”。下面是一个把限速、并发上限、超时、追踪打包起来的最小示例，搭配 Axum 路由即可复用在全站：
use axum::{routing::post, Router}; use std::time::Duration; use tower::{ServiceBuilder, timeout::TimeoutLayer}; use tower::limit::{ConcurrencyLimitLayer, RateLimitLayer}; use tower_http::trace::TraceLayer; async fn create_order() -> &'static str { "ok" } #[tokio::main] async fn main() { let middleware_stack = ServiceBuilder::new() .layer(TraceLayer::new_for_http()) .layer(TimeoutLayer::new(Duration::from_secs(2))) .layer(ConcurrencyLimitLayer::new(256)) .layer(RateLimitLayer::new(100, Duration::from_secs(1))) .into_inner(); let app = Router::new() .route("/orders", post(create_order)) .layer(middleware_stack); axum::Server::bind(&"0.0.0.0:3000".parse().unwrap()) .serve(app.into_make_service()) .await .unwrap(); } 这个“闸机”有两层意思：速率限制（每秒最多 100 个请求），和并发限制（最多同时处理 256 个）。既平滑了突发，也避免把下游打跪。更进一步，你可以按租户、按 API Key 维度做分桶配额，把“公平”落在数据上。
...</p></div><footer class=entry-footer><span title='2025-08-20 10:00:00 +0800 +0800'>August 20, 2025</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;374 words&nbsp;·&nbsp;梦兽编程</footer><a class=entry-link aria-label="post link to Rust 异步微服务扛洪攻略：限流、背压、批处理、中间件一站讲透" href=https://rexai.top/tutorials/rust/rust-async-microservices-traffic-gates-20250820/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy srcset='https://rexai.top/js-news/nodejs-middleware-optimization-performance-boost/cover_hu_a2423ab89076f9b7.png 360w,https://rexai.top/js-news/nodejs-middleware-optimization-performance-boost/cover_hu_e07957b8d6684b68.png 480w,https://rexai.top/js-news/nodejs-middleware-optimization-performance-boost/cover_hu_ec7cac7bb9bc55b3.png 720w,https://rexai.top/js-news/nodejs-middleware-optimization-performance-boost/cover_hu_937f2519c848cc87.png 1080w,https://rexai.top/js-news/nodejs-middleware-optimization-performance-boost/cover_hu_6dd8df4b4c07174a.png 1500w,https://rexai.top/js-news/nodejs-middleware-optimization-performance-boost/cover.png 1536w' src=https://rexai.top/js-news/nodejs-middleware-optimization-performance-boost/cover.png sizes="(min-width: 768px) 720px, 100vw" width=1536 height=1024 alt=Node.js中间件优化架构图></figure><header class=entry-header><h2 class=entry-hint-parent>一个中间件优化技巧，让我的Node.js服务器快了40%</h2></header><div class=entry-content><p>你有没有遇到过这种情况：Node.js服务器跑得越来越慢，用户抱怨页面卡顿，但你又不想大动干戈重写整个项目？
别慌，我今天要分享一个"偷懒但有效"的优化方案——中间件重构。用这个方法，我的服务器性能直接提升了40%，而且代码还变得更清爽了。
什么是中间件？先搞清楚这个概念 简单来说，中间件就像是餐厅的传菜员。你点了一份菜（发起请求），厨房做好了（处理逻辑），但在菜端到你面前之前，传菜员要做很多事：
检查菜品是否完整（数据验证） 确认你的身份（用户认证） 记录这次服务（日志记录） 处理特殊要求（错误处理） 在Node.js里，中间件就是这些"传菜员"，在请求和最终响应之间处理各种任务。
如果你用过Express.js，那你肯定已经在用中间件了，只是可能没意识到而已。
问题出在哪？大多数人都犯的中间件错误 我之前的代码就像这样：
// 每个路由都要跑一堆中间件 app.get('/users', logRequest, authCheck, loadUserData, getUsers); app.get('/products', logRequest, authCheck, loadUserData, fetchProducts); app.get('/public/info', logRequest, authCheck, loadUserData, getPublicInfo); 看出问题了吗？就像让每个顾客都要经过VIP包间的安检，即使他们只是去普通大厅吃个快餐。
这样做的结果：
冗余执行：相同的中间件在每个路由都要跑一遍 不必要的开销：public页面也要加载用户数据 调试噩梦：出了问题根本不知道是哪个环节卡住了 解决方案：分层中间件架构 我把中间件重新组织成了四层结构，就像机场安检一样：
全局中间件：所有人都要过的基础检查（解析请求、记录日志） 路由组中间件：特定区域的检查（比如只有国际航班才需要的额外安检） 上下文中间件：根据具体情况的检查（商务舱有专门通道） 处理器：最终的业务逻辑（登机）
具体实现起来是这样的：
// 全局中间件 - 所有请求都需要 app.use(express.json()); app.use(logger); // 公开路由组 - 最简单的处理 const publicRouter = express.Router(); publicRouter.get('/info', getPublicInfo); publicRouter.get('/docs', getDocs); app.use('/public', publicRouter); // 私有路由组 - 需要认证 const privateRouter = express.Router(); privateRouter.use(authCheck); // 只有这个组需要认证 privateRouter.use(loadUserData); // 只有这个组需要用户数据 privateRouter.get('/profile', getUserProfile); privateRouter.get('/settings', getUserSettings); app.use('/private', privateRouter); 为什么这样做能快40%？ 减少不必要的中间件执行：公开页面不再需要加载用户数据，直接省掉了数据库查询
降低I/O瓶颈：把耗时的操作（比如数据库查询）推到真正需要的时候才执行
更好的缓存利用：相同类型的请求可以共享缓存，避免重复计算
就像高速公路的ETC通道一样，不同类型的车走不同的通道，整体通行效率自然就提高了。
我是怎么测量这40%提升的？ 数据不会撒谎，我用了这些工具：
Apache Benchmark (ab)：模拟高并发请求 New Relic：实时性能监控
...</p></div><footer class=entry-footer><span title='2025-08-19 23:35:58 +0800 +0800'>August 19, 2025</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;120 words&nbsp;·&nbsp;梦兽编程</footer><a class=entry-link aria-label="post link to 一个中间件优化技巧，让我的Node.js服务器快了40%" href=https://rexai.top/js-news/nodejs-middleware-optimization-performance-boost/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://rexai.top/2025-08-18-23-41-44.png alt="Use Cerebras + run.claw.cloud to supercharge Claude Code via OpenAI-compatible API"></figure><header class=entry-header><h2 class=entry-hint-parent>3 步 0 成本接入 2000 tokens/s 模型，让 Claude Code 起飞（Cerebras × Cloudflare）</h2></header><div class=entry-content><p>三步打通 OpenAI 兼容通道，免费接入 Cerebras，让 Claude Code 又快又稳，成本接近 0。</p></div><footer class=entry-footer><span title='2025-08-18 00:00:00 +0800 +0800'>August 18, 2025</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;199 words&nbsp;·&nbsp;梦兽编程</footer><a class=entry-link aria-label="post link to 3 步 0 成本接入 2000 tokens/s 模型，让 Claude Code 起飞（Cerebras × Cloudflare）" href=https://rexai.top/tools/ai-tools/claude-code-zero-cost-supercharge/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Rust Axum 异步微服务实战：任务队列、重试机制与优雅关闭</h2></header><div class=entry-content><p>导语：99%程序员被异步任务折磨到秃头？这套Rust微服务架构让你一夜回到18岁
关注梦兽编程微信公众号，轻松入门Rust
你有没有在凌晨3点被手机震醒，然后发现生产环境的服务器又双叒叕挂了？用户投诉邮件像雪花一样飞来，而你只能在床上怀疑人生：为什么我的异步任务总是这么不听话？
如果你点头如捣蒜，那恭喜你找对地方了。今天我要教你用Rust的Axum框架，构建一个比瑞士手表还精准、比德国汽车还可靠的异步微服务。
异步微服务就像一家忙碌的咖啡厅 想象一下，你开了一家咖啡厅。顾客点单后，你不能傻傻地站在那里等咖啡煮好，否则后面排队的客人早就跑光了。聪明的做法是：接单→交给后厨→继续接下一单。
Axum微服务的工作原理就是这样。HTTP请求就像点咖啡的顾客，后台任务就像煮咖啡的师傅，而消息队列就是那张写满订单的小纸条。
首先，我们来搭建项目的基础依赖：
[dependencies] axum = "0.7" tokio = { version = "1", features = ["full"] } tokio-util = "0.7" serde = { version = "1", features = ["derive"] } serde_json = "1" tower = "0.4" 然后定义我们的任务结构，这就像咖啡厅的订单单：
use serde::{Deserialize, Serialize}; use tokio::sync::mpsc; use std::sync::Arc; #[derive(Debug, Clone, Serialize, Deserialize)] pub struct Job { pub id: u64, pub task_type: String, pub payload: String, } type JobSender = mpsc::Sender&lt;Job>; type JobReceiver = mpsc::Receiver&lt;Job>; 接下来创建我们的"点单台"：
use axum::{routing::post, Router, extract::Extension, Json}; // 这就是我们的"点单台" async fn submit_job( Extension(sender): Extension&lt;Arc&lt;JobSender>>, Json(payload): Json&lt;Job>, ) -> &'static str { match sender.send(payload).await { Ok(_) => "✅ 您的任务已接收，请稍等片刻", Err(_) => "❌ 任务队列已满，请稍后再试" } } async fn health_check() -> &'static str { "服务器状态：精神抖擞！" } fn create_app(sender: Arc&lt;JobSender>) -> Router { Router::new() .route("/submit", post(submit_job)) .route("/health", get(health_check)) .layer(Extension(sender)) } 后台任务队列：像快递分拣中心一样高效 你知道快递公司是怎么处理海量包裹的吗？他们有一个巨大的分拣中心，包裹通过传送带源源不断地流入，工人们井然有序地处理每一个包裹。
...</p></div><footer class=entry-footer><span title='2025-08-17 00:00:00 +0000 UTC'>August 17, 2025</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;615 words&nbsp;·&nbsp;梦兽编程</footer><a class=entry-link aria-label="post link to Rust Axum 异步微服务实战：任务队列、重试机制与优雅关闭" href=https://rexai.top/tutorials/rust/rust-axum-async-microservice-guide/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy srcset='https://rexai.top/tutorials/rust/rust-axum-graceful-shutdown-guide/conver_hu_361d293a76507d8d.png 360w,https://rexai.top/tutorials/rust/rust-axum-graceful-shutdown-guide/conver_hu_18f130af6ee3aaa1.png 480w,https://rexai.top/tutorials/rust/rust-axum-graceful-shutdown-guide/conver_hu_ea7eeb062c408dca.png 720w,https://rexai.top/tutorials/rust/rust-axum-graceful-shutdown-guide/conver_hu_acac9b848435fd1e.png 1080w,https://rexai.top/tutorials/rust/rust-axum-graceful-shutdown-guide/conver_hu_9f80c30626630ccd.png 1500w,https://rexai.top/tutorials/rust/rust-axum-graceful-shutdown-guide/conver.png 1536w' src=https://rexai.top/tutorials/rust/rust-axum-graceful-shutdown-guide/conver.png sizes="(min-width: 768px) 720px, 100vw" width=1536 height=1024 alt="Rust Axum 优雅停机（Graceful Shutdown）完整实现与最佳实践"></figure><header class=entry-header><h2 class=entry-hint-parent>Rust Axum 优雅停机终极指南：99% 程序员都踩过的坑，这次彻底解决</h2></header><div class=entry-content><p>Rust Axum 优雅停机终极指南：99%程序员都踩过的坑，这次彻底解决
关注梦兽编程微信公众号，轻松入门Rust
你是否遇到过这些生产环境的噩梦：服务器重启时丢失了用户数据？数据库连接异常导致事务回滚？WebSocket连接突然断开让用户体验崩塌？这些问题的根源往往就是一个被99%程序员忽视的细节——Rust Axum优雅停机。
兄弟，你是不是也这样？写完个牛逼的 Axum 服务，一跑起来，感觉自己就是世界之王。但要停掉它的时候，反手就是一个 Ctrl+C，简单粗暴，一了百了。
爽是爽了，但你知道后台发生了什么吗？
这就像你开了一家火爆的餐厅，晚上10点准备打烊，你不是直接拉电闸、锁大门，把还在啃鸡腿的顾客赶出去。那样明天你的店就会因为“服务态度恶劣”上热搜。
正确的做法是：门口挂上“今日已打烊”的牌子（不再接受新客人），让里面的客人吃完最后一口（处理完进行中的请求），然后厨房收拾干净（清理资源），最后才锁门回家。
今天，我就带你用 Rust 和 Axum，给你家的“餐厅”实现一个五星好评的打烊流程——优雅停机（Graceful Shutdown）。
为什么Rust Axum优雅停机如此重要？ 在深入技术实现之前，让我们先了解为什么优雅停机是生产环境的必备技能。据统计，70%的生产事故都与不当的服务重启和资源清理有关。一个完善的Rust Axum优雅停机机制能够：
避免数据丢失：正在处理的HTTP请求能够完成，避免用户操作失败
保护数据库连接：确保数据库事务正确提交或回滚，防止数据不一致
维护用户体验：WebSocket连接、实时推送等功能能够优雅地通知客户端
满足合规要求：金融、医疗等行业对服务可用性有严格要求
第一步：构建Rust信号监听系统 首先，我们的程序得能“听懂”指令。不能操作系统都喊“收工”了，它还傻乎乎地接着奏乐接着舞。这个指令就是 SIGINT (你按 Ctrl+C 发出的) 和 SIGTERM (系统或 Docker 这类工具发出的)。
在 Tokio 里，我们可以设置一个“信号员” shutdown_signal，让它竖起耳朵专门等这两个信号。
use tokio::signal; async fn shutdown_signal() { let ctrl_c = async { signal::ctrl_c() .await .expect("failed to install Ctrl+C handler"); }; #[cfg(unix)] let terminate = async { signal::unix::signal(signal::unix::SignalKind::terminate()) .expect("failed to install signal handler") .recv() .await; }; #[cfg(not(unix))] let terminate = std::future::pending::&lt;()>(); tokio::select! { _ = ctrl_c => {}, _ = terminate => {}, } println!("收到停机信号，准备优雅退场..."); } 这段代码就像给餐厅门口装了个声控开关，只要听到“打烊”或“关门”的口令，它就会触发下一步动作。
...</p></div><footer class=entry-footer><span title='2025-08-17 00:00:00 +0000 UTC'>August 17, 2025</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;286 words&nbsp;·&nbsp;梦兽编程</footer><a class=entry-link aria-label="post link to Rust Axum 优雅停机终极指南：99% 程序员都踩过的坑，这次彻底解决" href=https://rexai.top/tutorials/rust/rust-axum-graceful-shutdown-guide/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Claude Code Output Styles深度解析：如何自定义AI编程助手的人格与风格</h2></header><div class=entry-content><p>兄弟们，代码写得怎么样了？还在跟AI玩“你问我答”的初级游戏吗？
那套玩法已经过时了。
今天，我要给你看个能颠覆你编程方式的“核武器”——Claude Code最新推出的Output Styles功能。这玩意儿，说白了，就是让你给AI注入“灵魂”，把它从一个听话的工具，调教成你想要的任何“角色”。
想象一下，你的AI不再是那个只会机械吐代码的“工具人”，而是可以一秒化身成“资深架构师”帮你梳理遗留代码，下一秒又变成“TDD狂人”带你写出最牛的测试用例。
感觉来了吗？这已经不是简单的编程辅助了，这是在组建你自己的“AI梦之队”。
一、Output Styles：给你的AI装个“人格” 我们先来拆解下这个“Output Styles”到底是个什么神仙玩意儿。
简单粗暴地讲，它就是一套“AI人格切换器”。
传统的AI，你给它一个prompt，它给你一个答案。就像一个功能固定的计算器。而Output Styles，允许你直接修改Claude Code的“系统提示词”（System Prompt），从根上改变它的行为模式和说话风格。
这就像你不是在给你的“高达”下指令，而是在直接改造它的驾驶舱操作系统。你可以让它保留核心战斗力（比如写代码、操作文件），但彻底改变它的战斗风格。
二、官方“御三家”：三种预设人格 Claude官方先给你准备了三款“标准人格”，让你快速上手：
1. Default (默认人格) 这就是那个我们熟悉的、言简意赅的“编程特种兵”。话不多，活儿好。专为高效协作而生，没有废话，直奔主题。
2. Explanatory (导师人格) 这位就像你身边那个经验丰富、还特有耐心的技术总监。它在完成任务的同时，还会给你穿插各种“设计思路”和“技术选型”的深度见解。帮你不仅知其然，还知其所以然。
3. Learning (带教人格) 这简直是新人的福音。它会像个结对编程的教练，边做边教，甚至故意在代码里留下TODO(human)让你亲手补全，然后给你反馈。真正实现了“边做边学”的沉浸式体验。
三、如何召唤与切换“人格” 切换这些人格，就像在游戏里换皮肤一样简单。
想看看有谁可选？直接在终端输入：
/output-style 想直接指定某位“大神”上身？比如召唤“导师人格”：
/output-style explanatory 或者切换到“带教人格”：
/output-style learning 这些设定会直接保存在你项目本地的.claude/settings.local.json文件里，一次设定，整个项目通用，非常方便。
四、终极玩法：创造你自己的“AI神祇” 预设的玩腻了？重头戏来了——创造属于你自己的AI人格！
这才是Output Styles最恐怖的地方。你可以用自然语言，像写小说人物小传一样，去定义一个全新的AI风格。
比如，你想创造一个“代码安全审计官”：
/output-style:new 我想要一个严格的安全审计风格：先威胁建模，再静态/依赖/配置审计，输出CWE映射、修复PR草案和本地脚本。 这条指令下去，Claude就会为你生成一个全新的AI人格。这个“人格”文件会保存在~/.claude/output-styles目录下，是一个Markdown文件。你甚至可以把它放到项目级的.claude/output-styles目录里，让整个团队共享你创造的“AI专家”。
五、实战！让AI在真实场景中“秀肌肉” 光说不练假把式。我们来看几个能直接落地到你工作中的真实案例。
案例A：空降“屎山”项目？让“导师”给你画地图 刚接手一个堆积了五年的遗留代码库，两眼一抹黑？别慌。
召唤人格：
/output-style explanatory 下达指令：
“请为 services/order/ 目录做系统性走查，按模块输出架构图要点与常见反模式，并给我3条重构路线图。”
AI输出： 它会一边给你分析代码结构，一边穿插“Insights”解释为什么要这么设计，以及背后有哪些技术权衡。这哪是AI，这简直是请了个架构师给你做代码Consulting。
...</p></div><footer class=entry-footer><span title='2025-08-16 12:00:00 +0800 +0800'>August 16, 2025</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;117 words&nbsp;·&nbsp;梦兽编程</footer><a class=entry-link aria-label="post link to Claude Code Output Styles深度解析：如何自定义AI编程助手的人格与风格" href=https://rexai.top/tools/ai-tools/output-styles-custom-ai-persona/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Claude Code Tamagotchi：你的 VSCode 编程电子宠物与 AI 代码伙伴</h2></header><div class=entry-content><p>Claude Code Tamagotchi：你的 VSCode 编程电子宠物与 AI 代码伙伴 别卷了，你的代码里长出了一只会关心你的“猫”！
嘿，兄弟。
你是不是也经常这样：夜深人静，只有你和屏幕上闪烁的光标在对峙。Bug像打不完的地鼠，产品经理的需求像永无止境的紧箍咒。你敲下一行行代码，感觉自己像个没有感情的机器，全世界只剩下你一个人在战斗。
孤独吗？有点。
但如果，你的代码编辑器里，突然“活”过来一个会呼吸、会撒娇、还会吐槽你的小家伙呢？
说出来你可能不信，但就在我快要被一个诡异的bug逼疯的深夜，我的VSCode状态栏里，就出现了这么个小东西。它不是冷冰冰的插件，更像一个……嗯，一个有体温的“代码伴侣”。
这玩意儿，就是今天的主角——Claude Code Tamagotchi，一个能住在你IDE里的电子宠物。
这不只是个插件，这是个有“灵魂”的队友（特点与亮点） 忘掉那些死板的工具吧。这个小家伙是“活”的。
它真的住在你的状态栏里，会随着你的操作呼吸、变换表情。你疯狂敲代码，它就在旁边给你加油鼓劲；你停下来摸鱼超过5分钟，它会用无辜的眼神瞅着你，仿佛在说：“主人，你怎么不动了？”
最绝的是，它有自己的一套“生命体征”——饥饿、能量、清洁、快乐。
你写代码写久了，它会饿，会弹出个小气泡提醒你：“我饿了，喂我点吃的吧！” 你得像个老父亲一样，在终端里敲下命令给它“投喂”一块披萨。你调试代码崩溃了，它会难过，甚至会安慰你：“别灰心，bug是程序员最好的朋友（才怪）！”
这感觉太奇妙了。它就像一个真正懂你的朋友，把枯燥的编程变成了一场养成游戏。你不再是孤军奋战，你有了个“宠”，需要你照顾，也同样在用它的方式陪伴你。
它怎么就那么“懂”你？（工作原理与本地存档） 别以为这是什么魔法。这个小家伙的“情商”背后，是实实在在的技术。
它通过监控你的编码活动来判断你的状态。比如，它会分析你的打字频率、代码提交记录、调试器的状态。你长时间没有键盘输入，它就判定你在“休息”或者“摸鱼”。你的代码库有了新的commit，它就认为你完成了一项工作，会为你开心。
它的所有记忆和状态，都保存在本地的 ~/.claude/pets/ 文件夹里。这意味着什么？意味着你关掉编辑器再打开，它还认识你！你的“宠物”是有记忆的，你们的“感情”是可以延续的。
更牛的是，它内置了200多种基于上下文的“想法”。它会评价你的代码风格，吐槽你的TODO List，甚至在你熬夜太久时，会弹出一条信息：“嘿，哥们，差不多得了，命要紧！”
那一刻，我真的感觉不是AI在提醒我，而是一个看不见的朋友在拍我的肩膀。
三分钟“领养”指南（安装与快速上手） 心动了？别急，领养手续超级简单，三分钟搞定。
第一步：全局安装 打开你的终端，像迎接一位新伙伴一样，敲下这行命令：
npm install -g claude-code-tamagotchi
（如果你用bun，那就 bun add -g claude-code-tamagotchi）
第二步：唤醒它 找到你电脑里的 ~/.claude/settings.json 文件（没有就创建一个），把下面的配置复制进去：
{ "statusLine": { "type": "command", "command": "bunx claude-code-tamagotchi statusline", "padding": 0 } } 搞定！现在重启你的VSCode，看看你的状态栏，是不是有个小眼睛在好奇地打量着你？
想跟它互动？直接在终端里输入 claude-code-tamagotchi feed pizza 就能喂它，或者输入 claude-code-tamagotchi play ball 陪它玩。它会用自己的方式给你回应。
...</p></div><footer class=entry-footer><span title='2025-08-15 10:00:00 +0800 +0800'>August 15, 2025</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;96 words&nbsp;·&nbsp;梦兽编程</footer><a class=entry-link aria-label="post link to Claude Code Tamagotchi：你的 VSCode 编程电子宠物与 AI 代码伙伴" href=https://rexai.top/tools/ai-tools/claude-code-tamagotchi-your-ai-coding-buddy/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy srcset='https://rexai.top/tutorials/rust/axum-from-zero-to-hero-tutorial/cover_hu_c643b64ac3fef063.png 360w,https://rexai.top/tutorials/rust/axum-from-zero-to-hero-tutorial/cover_hu_9de371e5d219a4db.png 480w,https://rexai.top/tutorials/rust/axum-from-zero-to-hero-tutorial/cover_hu_30103f344ba4461a.png 720w,https://rexai.top/tutorials/rust/axum-from-zero-to-hero-tutorial/cover.png 800w' src=https://rexai.top/tutorials/rust/axum-from-zero-to-hero-tutorial/cover.png sizes="(min-width: 768px) 720px, 100vw" width=800 height=533 alt="使用 Rust 与 Axum 搭建高性能 Web 服务器"></figure><header class=entry-header><h2 class=entry-hint-parent>Rust + Axum = 王炸？手把手教你用“乐高”模式搭建高性能 Web 服务器！</h2></header><div class=entry-content><p>Rust + Axum = 王炸？手把手教你用“乐高”模式搭建高性能Web服务器！
你是不是也这样？
写多了Java，感觉自己像个“配置工程师”，满眼都是@Autowired和XML。
玩腻了Node.js，享受着异步的丝滑，却也为回调地狱和单线程的性能天花板而焦虑。
你听说过Rust，那个传说中运行起来快如闪电、内存安全到让GC（垃圾回收）下岗的“性能怪兽”。但每次看到 &'a、mut、Arc&lt;Mutex&lt;T>> 这些符号，就感觉大脑CPU过载，默默地把“从入门到放弃”打在了公屏上。
如果我告诉你，用Rust写后端，不仅不难，甚至还像玩乐高积木一样有趣、直观、且优雅，你会信吗？
别急着反驳。今天，我们就请出主角——Axum，一个由创造了tokio（Rust异步运行时事实上的标准）的官方团队打造的Web框架。它将彻底颠覆你对Rust后端开发的认知。
准备好了吗？让我们一起，用最骚的方式，搭一个快到没朋友的Web服务！
第一步：准备“食材”——把Axum请进你的项目 任何一个伟大的工程，都始于一个简单的Cargo.toml（你可以把它理解为Rust项目的package.json或pom.xml）。
打开你的Cargo.toml，把下面这两行“神兵利器”加到[dependencies]下面：
axum = "0.7" tokio = { version = "1", features = ["full"] } 简单解释一下这两个“乐高零件”：
axum: 我们今天的主角，负责处理HTTP请求的“总指挥官”。 tokio: Rust世界的“红牛”，提供了强大的异步运行时环境。features = ["full"]意思是，别客气，把所有功能都给我满上！ 当然，你也可以像个老炮儿一样，在命令行里潇洒地敲下：
cargo add axum cargo add tokio --features full 搞定！我们的厨房已经准备好了。
第二步：第一道“开胃菜”——你的第一个Axum应用 光说不练假把式。让我们直接上代码，看看一个最基础的Axum服务器长啥样。
在你的main.rs里，贴上这段代码：
use axum::{ routing::get, Router, }; use std::net::SocketAddr; #[tokio::main] async fn main() { // 我们的“路由总管”，负责管理所有的URL和对应的处理函数 let app = Router::new().route("/", get(root_handler)); // 定义服务器的监听地址，127.0.0.1:3000，很经典，对吧？ let addr = SocketAddr::from(([127, 0, 0, 1], 3000)); println!("🚀 服务启动，监听在 {}", addr); // 启动服务器，让它开始工作！ axum::Server::bind(&amp;addr) .serve(app.into_make_service()) .await .unwrap(); } // 这是一个“处理函数”（handler），负责处理发往根路径"/"的GET请求 async fn root_handler() -> &'static str { "你好，来自Axum的世界！🌍" } 看到没？这就是一个完整的Web服务器了！我们来庖丁解牛一下：
...</p></div><footer class=entry-footer><span title='2025-08-14 00:00:00 +0000 UTC'>August 14, 2025</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;688 words&nbsp;·&nbsp;梦兽编程</footer><a class=entry-link aria-label="post link to Rust + Axum = 王炸？手把手教你用“乐高”模式搭建高性能 Web 服务器！" href=https://rexai.top/tutorials/rust/axum-from-zero-to-hero-tutorial/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Rust 的 unsafe 不是“随便玩玩”，而是生死状：6 个让你代码原地爆炸的骚操作</h2></header><div class=entry-content><p>朋友，你是否也经历过这样的深夜？
显示器上，Rust编译器那鲜红的错误提示，像一双无情的大手，死死扼住你项目的喉咙。生命周期、所有权、借用检查……这些平时让你引以为傲的安全卫士，此刻却像一群喋喋不休的唐僧，念得你头皮发麻，只想大喊一声：“闭嘴！”
就在你万念俱灰，准备砸键盘的前一秒，一个词在你脑海中闪着金光，带着魔鬼的诱惑——unsafe。
它看起来那么美，像一个“作弊码”，一个能让所有红线瞬间消失的“上帝模式”开关。你颤抖着敲下这六个字母，把它像一个神圣的结界一样包裹住你那段“问题”代码。
cargo build… 成功了！世界清净了。
你长舒一口气，感觉自己像个驯服了恶龙的英雄。但你没看到的是，编译器在沉默的背后，留下了一个轻蔑的眼神，仿佛在说：“好吧，你非要这么玩，那接下来出的所有事，你自己扛。”
unsafe：不是免死金牌，而是你签下的“生死状” 让我们先撕掉unsafe那层“自由奔放”的伪装，直面它残酷的真相。
在Rust的世界里，unsafe关键字并不意味着“关闭所有安全检查，大家一起YOLO”。它的真正含义是：
“我，这位牛逼的程序员，在此郑重立誓，我将亲自接管这块代码的内存安全。编译器你看不懂的，我懂；你检查不到的，我来保证。如果程序崩溃、内存泄漏、数据错乱，甚至导致服务器爆炸、公司倒闭，都是我一个人的责任。”
看明白了吗？你不是在关闭规则，你是在跟编译器签一份“生死状”。你把胸脯拍得邦邦响，告诉它：“这块地盘我罩着，出事我负责！”
这就像你开着一辆有全球最顶级自动驾驶系统的汽车。但你嫌它太啰嗦，总在你快要撞墙时自动刹车。于是你手动关掉了所有安全辅助，一脚油门踩到底，笑着说：“还是手动挡开着爽！”
爽是爽了，但前方是悬崖还是坦途，就全看你自己的技术和运气了。
大多数时候，我们以为自己是藤原拓海，实际上我们只是刚拿驾照的愣头青。为了避免大家在“秋名山”上翻车，今天，我就带你盘点一下那些开发者最爱犯的unsafe“作-死-骚-操-作”。
第一宗罪：把unsafe当胶带，封住编译器的嘴 这是最常见，也是最愚蠢的错误。当你搞不定生命周期或者所有权问题时，第一反应不是去理解它，而是简单粗暴地用unsafe块包起来，让编译器“闭嘴”。
犯罪现场复现：
let r: &amp;i32; unsafe { r = std::mem::transmute(0x123456usize); } println!("{r}"); 这段代码，你用unsafe强行把一个不知所谓的内存地址 0x123456 “翻译”成了一个 i32 的引用。编译器被你用unsafe捂住了嘴，只能眼睁睁地看着你作死。
后果： 编译通过，运行崩溃。或者更糟的，它没崩溃，但在某个不为人知的角落，数据已经开始腐烂，直到你的客户在半夜三点打电话投诉，你都不知道问题出在哪。
梦兽箴言： 编译器对你发出的每一个警告，都像是你妈觉得你冷。她可能不懂时尚，但她绝不会害你。当你试图用unsafe让它闭嘴时，先问问自己：我是不是真的比这个设计了四十多年、凝聚了无数智慧的编译器系统更懂安全？
我们刚刚揭露了unsafe的第一宗罪，但这仅仅是打开了潘多拉魔盒的一条缝。现在，让我们深入黑暗，看看那些更隐蔽、更致命的骚操作。
第二宗罪：手持“万能钥匙”，却在开“盲盒” 裸指针（Raw Pointers）是unsafe世界里的常客。它就像一把钥匙，可以指向内存里的任何地方。而有些新手，拿到这把钥匙后，就兴奋地像个拿到了万能钥匙的小偷，随便找个“门牌号”（内存地址）就想开门看看。
犯罪现场复现：
let ptr = 0x123456usize as *const i32; unsafe { println!("{}", *ptr); // 哥们，你猜这里面是啥？ } 你给了ptr一个固定的内存地址，然后自信地用 * 来解引用，想看看里面藏着什么宝贝。
后果： 这不是在寻宝，这是在玩俄罗斯轮盘。那个地址上可能空无一物，可能是你操作系统的核心数据，也可能是隔壁程序存放的商业机密。你这一“开”，轻则程序当场去世，重则引发系统蓝屏，甚至可能因为修改了不该改的数据，导致一些无法预测的、幽灵般的bug。
梦兽箴言： unsafe给了你开锁的权利，但前提是你必须百分之百确定这把钥匙对应的是你自己的保险箱，而不是别人的军火库。正确的做法是什么？只解引用那些你亲手创建、知根知底的指针。
正确的“开锁”姿势：
let x = 42; // 从一个已知的、安全的变量x创建指针 let ptr = &amp;x as *const i32; unsafe { // SAFETY: 我们非常确定ptr指向的是x，而x活得好好的。 println!("safe ptr: {}", *ptr); // 输出: 42 } 记住，在unsafe的世界里，好奇心害死的不是猫，是你的程序。
...</p></div><footer class=entry-footer><span title='2025-08-13 00:00:00 +0000 UTC'>August 13, 2025</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;321 words&nbsp;·&nbsp;梦兽编程</footer><a class=entry-link aria-label="post link to Rust 的 unsafe 不是“随便玩玩”，而是生死状：6 个让你代码原地爆炸的骚操作" href=https://rexai.top/tutorials/rust/rust-unsafe-yolo-sao-cao-zuo/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy srcset='https://rexai.top/tools/ai-tools/ai-programming-web-deploy-free-guide-2025/cover_hu_d53a7e9fc7388f61.png 360w,https://rexai.top/tools/ai-tools/ai-programming-web-deploy-free-guide-2025/cover_hu_b259e8e1f75b43b4.png 480w,https://rexai.top/tools/ai-tools/ai-programming-web-deploy-free-guide-2025/cover_hu_89705f382366f4e3.png 720w,https://rexai.top/tools/ai-tools/ai-programming-web-deploy-free-guide-2025/cover_hu_56a0e2c1fdb512e7.png 1080w,https://rexai.top/tools/ai-tools/ai-programming-web-deploy-free-guide-2025/cover.png 1250w' src=https://rexai.top/tools/ai-tools/ai-programming-web-deploy-free-guide-2025/cover.png sizes="(min-width: 768px) 720px, 100vw" width=1250 height=832 alt="2025 AI 编程与 0 成本部署免费指南"></figure><header class=entry-header><h2 class=entry-hint-parent>2025 独立开发者“穷鬼套餐”：AI 编程省钱秘笈与 0 成本 Web 部署（含 DeepSeek R1 0528、Gemini 2.5、Qwen3 热点）</h2></header><div class=entry-content><p>2025 独立开发者“穷鬼套餐”：AI 编程省钱秘笈与 0 成本 Web 部署 你有没有过这种感觉——想用 AI 编程，但一看到价格就头皮发麻？（更新至 2025-08，覆盖 DeepSeek R1 0528、Gemini 2.5、Qwen3 等热门模型） 别慌，今天我就带你走一遍“穷鬼套餐”流程，免费吃到饱，照样写出高质量代码。
免费 AI 模型自助餐 —— 用浏览器就能开整 第一步，咱们先来个“大胃王挑战”。思路很简单：多开几个浏览器标签，把能白嫖的 AI 都拉上来。 为什么要这样？——不同平台的 AI 各有长短，组合起来就像组建一个超级英雄联盟。
这里是我亲测好用的免费 AI 列表：
z.ai 免费体验 GLM 4.5，性能不输 Claude 4，尤其擅长编程和逻辑推理。适合写函数、调试、做算法优化。 优点：速度快、代码质量高 缺点：偶尔会卡几秒，但白嫖还挑啥呢
Kimi.com Kimi K2 模型，风格和 Claude 很像，适合写长文档、做系统设计，甚至可以帮你生成完整的 API 说明。 优点：上下文记忆不错 缺点：偶尔会“话痨”
chat.qwen.ai 阿里出品的 Qwen3 Coder，代码能力很稳，尤其在中文编程场景下表现优异。 优点：编程指令执行力强 缺点：界面偏简单
OpenAI Playground 只要你同意共享数据给 OpenAI，就能拿到大额免费 Token，玩 GPT-4.1/5 都行。 优点：调试灵活，参数可控 缺点：要有一定英文基础
Google AI Studio Gemini 2.5 Pro/Flash 免费不限量，Pro 在项目规划和调试上简直是神器，还内置 Build apps with Gemini，特别适合写 React/TypeScript 初始化项目。 优点：适合产品原型和复杂系统思路梳理 缺点：有时对国内网络不太友好
...</p></div><footer class=entry-footer><span title='2025-08-12 00:00:00 +0800 +0800'>August 12, 2025</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;334 words&nbsp;·&nbsp;梦兽编程</footer><a class=entry-link aria-label="post link to 2025 独立开发者“穷鬼套餐”：AI 编程省钱秘笈与 0 成本 Web 部署（含 DeepSeek R1 0528、Gemini 2.5、Qwen3 热点）" href=https://rexai.top/tools/ai-tools/ai-programming-web-deploy-free-guide-2025/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://rexai.top/page/2/>&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>© <a href=https://rexai.top/>梦兽编程</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>