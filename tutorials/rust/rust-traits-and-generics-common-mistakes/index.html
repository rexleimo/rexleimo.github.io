<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Rustå†…å·ç»ˆææŒ‡å—ï¼š5ä¸ªè®©åŒäº‹é«˜æ”€ä¸èµ·çš„Traitä¸æ³›å‹éªšæ“ä½œ | æ¢¦å…½ç¼–ç¨‹</title><meta name=keywords content="Rust,Traits,Generics,æ³›å‹,ç‰¹æ€§,Rustç¼–ç¨‹,Rustæ•™ç¨‹,Rustæœ€ä½³å®è·µ,Rusté™·é˜±,Rusté”™è¯¯,Rustæ€§èƒ½ä¼˜åŒ–"><meta name=description content="æ·±å…¥è§£æRustä¸­Traitså’ŒGenericsçš„5ä¸ªå¸¸è§é™·é˜±ï¼Œä»æ³›å‹æ»¥ç”¨ã€Traitçº¦æŸæ··ä¹±ã€é™æ€åŠ¨æ€åˆ†å‘æ··æ·†ã€å…³è”ç±»å‹ä½¿ç”¨åˆ°ç»“æ„ä½“çº¦æŸæ»¥ç”¨ï¼Œå¸®ä½ å†™å‡ºæ›´ä¼˜é›…é«˜æ•ˆçš„Rustä»£ç "><meta name=author content="æ¢¦å…½ç¼–ç¨‹"><link rel=canonical href=https://rexai.top/tutorials/rust/rust-traits-and-generics-common-mistakes/><link crossorigin=anonymous href=/assets/css/stylesheet.36a35dd316f612e0d26c90cd90313d15705d24943d7cf2559674e92b21704616.css integrity="sha256-NqNd0xb2EuDSbJDNkDE9FXBdJJQ9fPJVlnTpKyFwRhY=" rel="preload stylesheet" as=style><link rel=icon href=https://rexai.top/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://rexai.top/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://rexai.top/favicon-32x32.png><link rel=apple-touch-icon href=https://rexai.top/apple-touch-icon.png><link rel=mask-icon href=https://rexai.top/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh-cn href=https://rexai.top/tutorials/rust/rust-traits-and-generics-common-mistakes/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=/css/extended/modern-typography.min.css integrity><style>.promotion-section{margin-top:3rem;padding:2rem;text-align:center;background:linear-gradient(135deg,rgba(59,130,246,5%) 0%,rgba(139,92,246,5%) 100%);border-radius:16px;border:1px solid rgba(59,130,246,.1);position:relative;overflow:hidden}.promotion-section::before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#3b82f6,#8b5cf6,#06b6d4);border-radius:16px 16px 0 0}.promotion-section h3{margin-bottom:1.5rem;color:var(--primary);font-size:1.5rem;font-weight:600;background:linear-gradient(135deg,#3b82f6,#8b5cf6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.qr-codes{display:flex;gap:2.5rem;justify-content:center;flex-wrap:wrap;margin-top:2rem}.qr-item{text-align:center;position:relative;transition:transform .3s ease}.qr-item:hover{transform:translateY(-5px)}.qr-item img{width:160px;height:160px;border:2px solid #e5e7eb;border-radius:16px;padding:12px;background:#fff;box-shadow:0 4px 20px rgba(0,0,0,8%),0 1px 3px rgba(0,0,0,.1);transition:all .3s ease;position:relative;overflow:hidden}.qr-item img::before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg,rgba(59,130,246,.1),rgba(139,92,246,.1));opacity:0;transition:opacity .3s ease;z-index:1}.qr-item:hover img{border-color:#3b82f6;box-shadow:0 8px 30px rgba(59,130,246,.2),0 2px 8px rgba(0,0,0,.1);transform:scale(1.02)}.qr-item:hover img::before{opacity:1}.qr-item p{margin-top:1rem;font-size:1rem;color:var(--secondary);font-weight:500;position:relative}.modern-button{display:inline-flex;align-items:center;padding:.75rem 1.5rem;background:linear-gradient(135deg,#3b82f6,#8b5cf6);color:#fff;text-decoration:none;border-radius:12px;font-weight:500;transition:all .3s ease;box-shadow:0 4px 12px rgba(59,130,246,.3);position:relative;overflow:hidden}.modern-button::before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .6s ease}.modern-button:hover::before{left:100%}.modern-button:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(59,130,246,.4)}@keyframes fadeInUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.post-content>*{animation:fadeInUp .6s ease-out;animation-fill-mode:both}.post-content>*:nth-child(1){animation-delay:.1s}.post-content>*:nth-child(2){animation-delay:.2s}.post-content>*:nth-child(3){animation-delay:.3s}.post-content>*:nth-child(4){animation-delay:.4s}@media(max-width:768px){.promotion-section{margin:2rem -1rem;border-radius:0;padding:1.5rem 1rem}.qr-codes{flex-direction:column;align-items:center;gap:1.5rem}.qr-item img{width:140px;height:140px;padding:10px}.promotion-section h3{font-size:1.25rem}}.reading-progress{position:fixed;top:0;left:0;width:0%;height:3px;background:linear-gradient(90deg,#3b82f6,#8b5cf6,#06b6d4);z-index:999;transition:width .1s ease}.post-actions{margin-top:2.5rem;padding-top:1.25rem;border-top:1px dashed var(--border)}.post-actions__group{display:flex;flex-wrap:wrap;gap:.75rem 1rem;align-items:center}.post-actions__item{display:inline-flex;align-items:center}*{transition:background-color .3s ease,color .3s ease,border-color .3s ease}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{background:var(--theme)}::-webkit-scrollbar-thumb{background:linear-gradient(135deg,#3b82f6,#8b5cf6);border-radius:4px}::-webkit-scrollbar-thumb:hover{background:linear-gradient(135deg,#2563eb,#7c3aed)}</style><script>document.addEventListener("DOMContentLoaded",function(){const e=document.createElement("div");e.className="reading-progress",document.body.appendChild(e);function t(){const t=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.scrollHeight-document.documentElement.clientHeight,s=t/n*100;e.style.width=s+"%"}window.addEventListener("scroll",t),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})})})})</script><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-K6VQRF8T")</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K6VQRF8T" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-62VF26DEY6"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-62VF26DEY6")</script><meta property="og:url" content="https://rexai.top/tutorials/rust/rust-traits-and-generics-common-mistakes/"><meta property="og:site_name" content="æ¢¦å…½ç¼–ç¨‹"><meta property="og:title" content="Rustå†…å·ç»ˆææŒ‡å—ï¼š5ä¸ªè®©åŒäº‹é«˜æ”€ä¸èµ·çš„Traitä¸æ³›å‹éªšæ“ä½œ"><meta property="og:description" content="æ·±å…¥è§£æRustä¸­Traitså’ŒGenericsçš„5ä¸ªå¸¸è§é™·é˜±ï¼Œä»æ³›å‹æ»¥ç”¨ã€Traitçº¦æŸæ··ä¹±ã€é™æ€åŠ¨æ€åˆ†å‘æ··æ·†ã€å…³è”ç±»å‹ä½¿ç”¨åˆ°ç»“æ„ä½“çº¦æŸæ»¥ç”¨ï¼Œå¸®ä½ å†™å‡ºæ›´ä¼˜é›…é«˜æ•ˆçš„Rustä»£ç "><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="tutorials"><meta property="article:published_time" content="2025-01-27T10:00:00+08:00"><meta property="article:modified_time" content="2025-01-27T10:00:00+08:00"><meta property="article:tag" content="Rust"><meta property="article:tag" content="Traits"><meta property="article:tag" content="Generics"><meta property="article:tag" content="ç¼–ç¨‹æ•™ç¨‹"><meta property="article:tag" content="æœ€ä½³å®è·µ"><meta property="article:tag" content="æ€§èƒ½ä¼˜åŒ–"><meta property="og:image" content="https://rexai.top/cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rexai.top/cover.png"><meta name=twitter:title content="Rustå†…å·ç»ˆææŒ‡å—ï¼š5ä¸ªè®©åŒäº‹é«˜æ”€ä¸èµ·çš„Traitä¸æ³›å‹éªšæ“ä½œ"><meta name=twitter:description content="æ·±å…¥è§£æRustä¸­Traitså’ŒGenericsçš„5ä¸ªå¸¸è§é™·é˜±ï¼Œä»æ³›å‹æ»¥ç”¨ã€Traitçº¦æŸæ··ä¹±ã€é™æ€åŠ¨æ€åˆ†å‘æ··æ·†ã€å…³è”ç±»å‹ä½¿ç”¨åˆ°ç»“æ„ä½“çº¦æŸæ»¥ç”¨ï¼Œå¸®ä½ å†™å‡ºæ›´ä¼˜é›…é«˜æ•ˆçš„Rustä»£ç "><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"æ•™ç¨‹","item":"https://rexai.top/tutorials/"},{"@type":"ListItem","position":2,"name":"Rust æ•™ç¨‹","item":"https://rexai.top/tutorials/rust/"},{"@type":"ListItem","position":3,"name":"Rustå†…å·ç»ˆææŒ‡å—ï¼š5ä¸ªè®©åŒäº‹é«˜æ”€ä¸èµ·çš„Traitä¸æ³›å‹éªšæ“ä½œ","item":"https://rexai.top/tutorials/rust/rust-traits-and-generics-common-mistakes/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Rustå†…å·ç»ˆææŒ‡å—ï¼š5ä¸ªè®©åŒäº‹é«˜æ”€ä¸èµ·çš„Traitä¸æ³›å‹éªšæ“ä½œ","name":"Rustå†…å·ç»ˆææŒ‡å—ï¼š5ä¸ªè®©åŒäº‹é«˜æ”€ä¸èµ·çš„Traitä¸æ³›å‹éªšæ“ä½œ","description":"æ·±å…¥è§£æRustä¸­Traitså’ŒGenericsçš„5ä¸ªå¸¸è§é™·é˜±ï¼Œä»æ³›å‹æ»¥ç”¨ã€Traitçº¦æŸæ··ä¹±ã€é™æ€åŠ¨æ€åˆ†å‘æ··æ·†ã€å…³è”ç±»å‹ä½¿ç”¨åˆ°ç»“æ„ä½“çº¦æŸæ»¥ç”¨ï¼Œå¸®ä½ å†™å‡ºæ›´ä¼˜é›…é«˜æ•ˆçš„Rustä»£ç ","keywords":["Rust","Traits","Generics","æ³›å‹","ç‰¹æ€§","Rustç¼–ç¨‹","Rustæ•™ç¨‹","Rustæœ€ä½³å®è·µ","Rusté™·é˜±","Rusté”™è¯¯","Rustæ€§èƒ½ä¼˜åŒ–"],"articleBody":"Rustå†…å·ç»ˆææŒ‡å—ï¼š5ä¸ªè®©åŒäº‹\"é«˜æ”€ä¸èµ·\"çš„Traitä¸æ³›å‹éªšæ“ä½œ å…³æ³¨æ¢¦å…½ç¼–ç¨‹å¾®ä¿¡å…¬ä¼—å·ï¼Œå¹½é»˜å­¦ä¹ Rust\nä½ å¥½ï¼Œå‹‡æ•¢çš„Rustaceanï¼ˆRustå¼€å‘è€…ï¼‰ï¼\nä½ æ˜¯å¦æ›¾è¢«Rustçš„ç¼–è¯‘å™¨\"æŒ‰åœ¨åœ°ä¸Šæ‘©æ“¦\"ï¼Ÿé¢å¯¹ç€ä¸€å±å¹•å¤©ä¹¦èˆ¬çš„é”™è¯¯ä¿¡æ¯ï¼Œæ€€ç–‘è‡ªå·±æ˜¯ä¸æ˜¯é€‰é”™äº†ç¼–ç¨‹è¯­è¨€ï¼Ÿåˆ«æ€•ï¼Œä½ ä¸æ˜¯ä¸€ä¸ªäººåœ¨æˆ˜æ–—ã€‚\nRustæœ€å¼ºå¤§çš„æ­¦å™¨ï¼Œè«è¿‡äºå®ƒçš„\"é›¶æˆæœ¬æŠ½è±¡\"èƒ½åŠ›ã€‚è€Œè¿™å¥—æ­¦åŠŸçš„æ ¸å¿ƒç§˜ç±ï¼Œå°±æ˜¯Traitsï¼ˆç‰¹æ€§ï¼‰ã€Genericsï¼ˆæ³›å‹ï¼‰å’ŒWhereï¼ˆçº¦æŸï¼‰ã€‚ç”¨å¥½äº†ï¼Œä½ çš„ä»£ç ä¼šåƒè¯—ä¸€æ ·ä¼˜é›…ï¼ŒåƒF1èµ›è½¦ä¸€æ ·è¿…çŒ›ã€‚\nä½†â€¦â€¦å¦‚æœç”¨é”™äº†å‘¢ï¼Ÿå®ƒä»¬ä¼šç¬é—´å˜æˆä¸€é”…è®©ä½ å¤´çš®å‘éº»çš„\"æ„å¤§åˆ©é¢\"ï¼Œç¼–è¯‘é”™è¯¯èƒ½ç»•åœ°çƒä¸‰åœˆï¼Œè¶³ä»¥æŠŠä»»ä½•ä¸€ä¸ªç¼–ç¨‹æ–°æ‰‹å“å¾—è¿å¤œå¸è½½Rustã€‚\nä»Šå¤©æˆ‘å°†ä¸ºä½ æ­ç¤ºå¹¶å¡«å¹³é‚£äº›æœ€å¸¸è§çš„Traitä¸æ³›å‹\"å¤©å‘\"ã€‚åç¨³äº†ï¼Œå‘è½¦ï¼\nå¤©å‘ä¸€ï¼šå± é¾™åˆ€ç”¨æ¥åˆ‡èœ â€”â€” ä¸å¿…è¦çš„æ³›å‹æ»¥ç”¨ æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ‹¥æœ‰äº†ä¸€æŠŠå‰Šé“å¦‚æ³¥çš„å± é¾™å®åˆ€ï¼Œä½†ä½ æ¯å¤©éƒ½ç”¨å®ƒæ¥åˆ‡åœŸè±†ä¸ã€‚æ˜¯ä¸æ˜¯æœ‰ç‚¹å¤§æå°ç”¨äº†ï¼Ÿ\nä½ å¯èƒ½æ­£åœ¨çŠ¯çš„é”™ï¼š\n// çœ‹èµ·æ¥æ²¡æ¯›ç—…ï¼Œå¯¹å§ï¼Ÿ fn print_value\u003cT: std::fmt::Debug\u003e(value: T) { println!(\"{:?}\", value); } æŠ€æœ¯ä¸Šè®²ï¼Œè¿™ä»£ç èƒ½è·‘ã€‚ä½†é—®é¢˜æ˜¯ï¼Œå¦‚æœä½ åœ¨æ•´ä¸ªé¡¹ç›®ä¸­ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ä¼ è¿›å»çš„æ°¸è¿œéƒ½åªæ˜¯ä¸€ä¸ªi32ç±»å‹ï¼Œé‚£ä½ ä¸ºä»€ä¹ˆè¦ç”¨æ³›å‹ï¼Ÿ\nä½ ä¸ºäº†ä¸€ä¸ªæ ¹æœ¬ä¸å­˜åœ¨çš„\"çµæ´»æ€§\"ï¼Œå‡­ç©ºå¢åŠ äº†ä»£ç çš„å¤æ‚åº¦ã€‚ç¼–è¯‘å™¨éœ€è¦ä¸ºæ¯ä¸ªå…·ä½“ç±»å‹è¿›è¡Œ\"å•æ€åŒ–\"ï¼ˆMonomorphizationï¼‰ï¼Œç”Ÿæˆé¢å¤–çš„ä»£ç ã€‚è¿™å°±åƒä½ ä¸ºäº†å¶å°”å¯èƒ½è¦æ‹›å¾…ä¸€ä½å›½ç‹ï¼ŒæŠŠå®¶é‡Œæ‰€æœ‰æˆ¿é—´éƒ½æŒ‰äº”æ˜Ÿçº§æ€»ç»Ÿå¥—æˆ¿è£…ä¿®äº†ä¸€éï¼Œç»“æœæ¥çš„æ°¸è¿œæ˜¯é‚»å±…è€ç‹ã€‚\næ›´æ˜æ™ºçš„åšæ³•ï¼š\n// æœ´å®æ— åï¼Œä½†é«˜æ•ˆ fn print_value(value: i32) { println!(\"{:?}\", value); } æˆ‘çš„ç¥ä¹‹ç®´è¨€ï¼š è®°ä½ï¼Œæ³›å‹æ˜¯ä½ çš„è¶…èƒ½åŠ›ï¼Œä½†åˆ«è¿‡æ—©åœ°ç‚«è€€è‚Œè‚‰ã€‚åªæœ‰å½“ä½ çœŸæ­£éœ€è¦å¤„ç†å¤šç§ç±»å‹æ—¶ï¼Œå†å»å¬å”¤æ³›å‹è¿™æ¡\"ç¥é¾™\"ï¼Œå¦åˆ™ï¼Œä»å…·ä½“ç±»å‹å¼€å§‹ï¼Œæ°¸è¿œæ˜¯æœ€é«˜æ•ˆã€æœ€æ¸…æ™°çš„é€‰æ‹©ã€‚\nå¤©å‘äºŒï¼šä»£ç ç•Œçš„\"æ„é¢\"â€”â€” æ‚ä¹±æ— ç« çš„Traitçº¦æŸ å½“ä½ çš„å‡½æ•°éœ€è¦ä¸æ­¢ä¸€ä¸ªæ³›å‹å‚æ•°ï¼Œå¹¶ä¸”æ¯ä¸ªå‚æ•°éƒ½å¸¦ç€ä¸€å †çº¦æŸæ—¶ï¼Œä½ çš„å‡½æ•°ç­¾åå¾ˆå¿«å°±ä¼šå˜æˆä¸€ç¢—çœ‹ä¸æ‡‚çš„\"æ„å¤§åˆ©é¢æ¡\"ã€‚\nä½ å¯èƒ½æ­£åœ¨çŠ¯çš„é”™ï¼š\n// ä¸€ä¸ªå‚æ•°è¿˜è¡Œï¼Œä¸¤ä¸ªè¯•è¯•ï¼Ÿ fn log_json\u003cT: serde::Serialize + std::fmt::Debug + Clone\u003e(item: T) { // ... } å½“çº¦æŸæ¡ä»¶è¶Šæ¥è¶Šå¤šï¼Œå°–æ‹¬å· \u003c\u003e é‡Œçš„å†…å®¹ä¼šå˜å¾—è¶Šæ¥è¶Šé•¿ï¼Œå¯è¯»æ€§ç›´çº¿ä¸‹é™ï¼Œç»´æŠ¤èµ·æ¥ç®€ç›´æ˜¯å™©æ¢¦ã€‚\næ›´æ˜æ™ºçš„åšæ³•ï¼šè®©whereå­å¥æ¥æ‹¯æ•‘ä½ ï¼\nwhereå­å¥å°±åƒä¸€ä¸ªä¸“ä¸šçš„å›¾ä¹¦ç®¡ç†å‘˜ï¼Œå®ƒä¼šæŠŠæ‰€æœ‰ä¹±ä¸ƒå…«ç³Ÿçš„çº¦æŸæ¡ä»¶æ•´é½åœ°æ”¶çº³èµ·æ¥ï¼Œè®©ä½ çš„å‡½æ•°ç­¾åæ¸…çˆ½å¾—åƒå¤å¤©çš„é£ã€‚\n// ä½¿ç”¨ whereï¼Œä»£ç ç¬é—´æ¸…çˆ½ fn log_json\u003cT\u003e(item: T) where T: serde::Serialize + std::fmt::Debug + Clone, { // ... } // å¤šä¸ªå‚æ•°ï¼Ÿå°èœä¸€ç¢Ÿï¼ fn process_data\u003cT, U\u003e(a: T, b: U) where T: Clone + std::fmt::Debug, U: Default + std::fmt::Debug, { // ... } æˆ‘çš„ç¥ä¹‹ç®´è¨€ï¼š æŠŠçº¦æŸæ¡ä»¶ä»å°–æ‹¬å·é‡Œè§£æ”¾å‡ºæ¥ï¼Œäº¤ç»™whereå­å¥å»ç®¡ç†ã€‚è¿™ä¸ä»…æ˜¯é£æ ¼é—®é¢˜ï¼Œæ›´æ˜¯ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§çš„ç”Ÿå‘½çº¿ã€‚\nå¤©å‘ä¸‰ï¼šé”™æŠŠ\"é™æ€\"å½“\"åŠ¨æ€\"â€”â€” æ··æ·†æ³›å‹ä¸Traitå¯¹è±¡ è¿™æ˜¯æ–°æ‰‹æœ€å®¹æ˜“æ ½è¿›å»çš„å‘ã€‚æ³›å‹å’ŒTraitå¯¹è±¡ï¼ˆdyn Traitï¼‰éƒ½èƒ½å®ç°å¤šæ€ï¼Œä½†å®ƒä»¬çš„åº”ç”¨åœºæ™¯æˆªç„¶ä¸åŒã€‚\næ³›å‹ï¼ˆGenericsï¼‰ï¼šé™æ€åˆ†å‘ã€‚åœ¨ç¼–è¯‘æ—¶ï¼Œç¼–è¯‘å™¨å°±çŸ¥é“æ‰€æœ‰å…·ä½“çš„ç±»å‹ï¼Œå¹¶ä¸ºæ¯ä¸ªç±»å‹ç”Ÿæˆä¸€ä»½ä»£ç ã€‚å¿«ï¼Œä½†ä¸å¤Ÿçµæ´»ï¼Œä½ æ— æ³•åœ¨ä¸€ä¸ªé›†åˆé‡Œå­˜æ”¾ä¸åŒç±»å‹çš„å®ä¾‹ã€‚ Traitå¯¹è±¡ï¼ˆ\u0026dyn Traitï¼‰ï¼šåŠ¨æ€åˆ†å‘ã€‚åœ¨è¿è¡Œæ—¶ï¼Œé€šè¿‡è™šå‡½æ•°è¡¨ï¼ˆvtableï¼‰æ¥è°ƒç”¨ç›¸åº”çš„æ–¹æ³•ã€‚ç¨å¾®æ…¢ä¸€ç‚¹ç‚¹ï¼ˆå‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ï¼‰ï¼Œä½†æå…¶çµæ´»ï¼Œå…è®¸ä½ åˆ›å»ºå¼‚æ„é›†åˆï¼ˆæ¯”å¦‚ä¸€ä¸ªå­˜æ”¾äº†çŒ«ã€ç‹—ã€é¸Ÿçš„åŠ¨ç‰©åˆ—è¡¨ï¼‰ã€‚ ä½ å¯èƒ½æ­£åœ¨çŠ¯çš„é”™ï¼š\nä½ æƒ³åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œèƒ½æ¥å—ä»»ä½•å¯ä»¥\"ç»˜åˆ¶\"è‡ªå·±çš„ä¸œè¥¿ï¼Œäºæ˜¯ä½ å†™äº†æ³›å‹ç‰ˆæœ¬ï¼š\ntrait Drawable { fn draw(\u0026self); } // è¿™ä¸ªå‡½æ•°ä¸€æ¬¡åªèƒ½æ¥å—ä¸€ç§å…·ä½“çš„ Drawable ç±»å‹ // ä½ æ²¡æ³•ç»™å®ƒä¼ ä¸€ä¸ªæ—¢æœ‰ Circle åˆæœ‰ Square çš„åˆ—è¡¨ fn draw_static\u003cT: Drawable\u003e(item: T) { item.draw(); } æ›´æ˜æ™ºçš„åšæ³•ï¼šå½“ä½ éœ€è¦å¼‚æ„é›†åˆæ—¶ï¼Œæ‹¥æŠ±dyn Trait\n// ä½¿ç”¨ Trait å¯¹è±¡ï¼Œæ¥å—ä»»ä½•å®ç°äº† Drawable çš„ç±»å‹ fn draw_dynamic(item: \u0026dyn Drawable) { item.draw(); } // ç»ˆæç”¨æ³•ï¼šæ¸²æŸ“ä¸€ä¸ªåŒ…å«å„ç§å½¢çŠ¶çš„åœºæ™¯ fn render_scene(items: Vec\u003cBox\u003cdyn Drawable\u003e\u003e) { for item in items { item.draw(); } } æˆ‘çš„ç¥ä¹‹ç®´è¨€ï¼š ç®€å•è®°ï¼šå½“ä½ éœ€è¦ä¸€ä¸ªå‡½æ•°æˆ–ç»“æ„ä½“åœ¨ç¼–è¯‘æ—¶å°±ç¡®å®šç±»å‹ï¼Œè¿½æ±‚æè‡´æ€§èƒ½æ—¶ï¼Œç”¨æ³›å‹ã€‚å½“ä½ éœ€è¦åœ¨è¿è¡Œæ—¶å¤„ç†ä¸€ä¸ªåŒ…å«äº†å¤šç§ä¸åŒç±»å‹ï¼ˆä½†éƒ½å®ç°äº†åŒä¸€ä¸ªTraitï¼‰çš„é›†åˆæ—¶ï¼Œè¯·æ¯«ä¸çŠ¹è±«åœ°ä½¿ç”¨Traitå¯¹è±¡ã€‚è¿™æ‰æ˜¯\"é¸­å­ç±»å‹\"åœ¨Rustä¸­çš„æ­£ç¡®æ‰“å¼€æ–¹å¼ã€‚\nå¤©å‘å››ï¼šç»™Trait\"å®¶æ—\"æ·»ä¹±â€”â€”ä¸ç”¨å…³è”ç±»å‹ï¼Œè‡ªæ‰¾éº»çƒ¦ å½“ä¸€ä¸ªTraitå†…éƒ¨çš„å¤šä¸ªæ–¹æ³•éƒ½ä¾èµ–äºåŒä¸€ä¸ª\"é™„å±ç±»å‹\"æ—¶ï¼Œä½¿ç”¨æ³›å‹ä¼šè®©äº‹æƒ…å˜å¾—å¼‚å¸¸ç¬¨æ‹™ã€‚\nä½ å¯èƒ½æ­£åœ¨çŠ¯çš„é”™ï¼š\n// ç”¨æ³›å‹æ¥å®šä¹‰å­˜å‚¨çš„ç‰©å“ç±»å‹ï¼Œå¤ªå•°å—¦äº†ï¼ trait Storage\u003cT\u003e { fn save(\u0026self, item: T); fn load(\u0026self) -\u003e T; } è¿™ç§å†™æ³•åœ¨å®ç°ï¼ˆimplï¼‰çš„æ—¶å€™ä¼šéå¸¸åˆ«æ‰­ï¼Œå› ä¸ºä½ éœ€è¦åœ¨ä»»ä½•åœ°æ–¹éƒ½æ‹–ç€é‚£ä¸ªæ³›å‹Tã€‚\næ›´æ˜æ™ºçš„åšæ³•ï¼šä½¿ç”¨å…³è”ç±»å‹ï¼ˆAssociated Typesï¼‰\nå…³è”ç±»å‹è®©ä½ çš„Traitæ›´åŠ \"å†…èš\"å’Œæ¸…æ™°ã€‚å®ƒåƒæ˜¯åœ¨è¯´ï¼šâ€œä»»ä½•å®ç°æˆ‘è¿™ä¸ªStorage Traitçš„ç±»å‹ï¼Œéƒ½å¿…é¡»å†…éƒ¨æŒ‡å®šä¸€ä¸ªå®ƒæ‰€å­˜å‚¨çš„Itemç±»å‹ã€‚â€\ntrait Storage { type Item; // åœ¨è¿™é‡Œå®šä¹‰å…³è”ç±»å‹ fn save(\u0026self, item: Self::Item); fn load(\u0026self) -\u003e Self::Item; } // å®ç°èµ·æ¥å¤šä¹ˆå¹²å‡€ï¼ struct MemoryStorage; impl Storage for MemoryStorage { type Item = String; // ç›´æ¥åœ¨è¿™é‡ŒæŒ‡å®šå…·ä½“ç±»å‹ fn save(\u0026self, item: String) { /* ... */ } fn load(\u0026self) -\u003e String { /* ... */ } } æˆ‘çš„ç¥ä¹‹ç®´è¨€ï¼š å½“Traitä¸­çš„æŸä¸ªç±»å‹ä¸å®ç°è¯¥Traitçš„ç±»å‹æœ¬èº«å¼ºç›¸å…³æ—¶ï¼Œè¯·ä½¿ç”¨å…³è”ç±»å‹ã€‚å®ƒèƒ½æå¤§åœ°ç®€åŒ–APIï¼Œè®©ä½ çš„Traitè®¾è®¡æ›´åŠ ä¼˜é›…ã€‚\nå¤©å‘äº”ï¼šè¿‡æ—©çš„\"æ‰¿è¯º\"â€”â€”åœ¨ç»“æ„ä½“ä¸Šæ»¥ç”¨çº¦æŸ è¿™æ˜¯ä¸€ä¸ªéå¸¸å¾®å¦™ä½†å½±å“æ·±è¿œçš„åä¹ æƒ¯ã€‚\nä½ å¯èƒ½æ­£åœ¨çŠ¯çš„é”™ï¼š\n// åœ¨å®šä¹‰ç»“æ„ä½“æ—¶å°±åŠ ä¸Šäº† Display çº¦æŸ struct Wrapper\u003cT: std::fmt::Display\u003e { value: T, } é—®é¢˜æ¥äº†ï¼šè¿™æ„å‘³ç€ï¼Œä½ ç”šè‡³æ— æ³•åˆ›å»ºä¸€ä¸ªWrapperå®ä¾‹ï¼Œé™¤éå®ƒé‡Œé¢çš„Tç±»å‹å®ç°äº†Display Traitâ€”â€”å“ªæ€•ä½ æš‚æ—¶æ ¹æœ¬ä¸æ‰“ç®—æ‰“å°å®ƒï¼è¿™ä¸ªçº¦æŸå¤ªéœ¸é“äº†ã€‚\næ›´æ˜æ™ºçš„åšæ³•ï¼šåªåœ¨éœ€è¦æ—¶æ‰æ·»åŠ çº¦æŸ\næŠŠçº¦æŸä»ç»“æ„ä½“å®šä¹‰ä¸Šç§»åˆ°çœŸæ­£éœ€è¦å®ƒçš„implå—æˆ–æ–¹æ³•ä¸Šã€‚\n// ç»“æ„ä½“æœ¬èº«æ²¡æœ‰ä»»ä½•çº¦æŸ struct Wrapper\u003cT\u003e { value: T, } // åªåœ¨éœ€è¦æ‰“å°çš„ show æ–¹æ³•ä¸Šæ·»åŠ  Display çº¦æŸ impl\u003cT: std::fmt::Display\u003e Wrapper\u003cT\u003e { fn show(\u0026self) { println!(\"{}\", self.value); } } æˆ‘çš„ç¥ä¹‹ç®´è¨€ï¼š ç»™äºˆä½ çš„ç»“æ„ä½“æœ€å¤§çš„è‡ªç”±ã€‚ä¸è¦åœ¨å®šä¹‰æ—¶å°±ç”¨Traitçº¦æŸæŠŠå®ƒ\"é”æ­»\"ã€‚åªåœ¨ç‰¹å®šçš„æ–¹æ³•å®ç°ï¼ˆimplï¼‰ä¸­æå‡ºä½ çš„è¦æ±‚ï¼Œè¿™æ‰æ˜¯\"æœ€å°æƒé™åŸåˆ™\"çš„ç²¾é«“ã€‚\nç»“è¯­ï¼šä»\"å¤©å‘\"åˆ°\"é€šé€”\" æ­å–œä½ ï¼Œä½ å·²ç»æˆåŠŸç»•è¿‡äº†è¿™äº”ä¸ªæœ€å±é™©çš„\"å¤©å‘\"ï¼\nTraitså’Œæ³›å‹æ˜¯Rustèµ‹äºˆä½ çš„å± é¾™ä¹‹æŠ€ï¼Œå®ƒä»¬å¼ºå¤§ã€çµæ´»ï¼Œä½†ä¹Ÿéœ€è¦æ™ºæ…§å’Œçºªå¾‹å»é©¾é©­ã€‚è®°ä½ä»Šå¤©å­¦åˆ°çš„ï¼š\nä»å…·ä½“åˆ°æŠ½è±¡ï¼Œä¸è¦æ»¥ç”¨æ³›å‹ã€‚ ç”¨whereï¼Œç»™ä½ çš„ä»£ç ç­¾å\"åšä¿æ´\"ã€‚ åˆ†æ¸…é™æ€ä¸åŠ¨æ€ï¼Œåœ¨æ³›å‹å’Œdyn Traité—´åšå‡ºæ­£ç¡®é€‰æ‹©ã€‚ æ‹¥æŠ±å…³è”ç±»å‹ï¼Œè®¾è®¡æ›´æ¸…æ™°çš„Traitã€‚ è®©çº¦æŸ\"æ°å¦‚å…¶åˆ†\"ï¼Œä¸è¦è¿‡æ—©åœ°é™åˆ¶ä½ çš„ç»“æ„ä½“ã€‚ æŒæ¡äº†è¿™äº›ï¼Œä½ çš„Rustä»£ç å°†æå‡åˆ°ä¸€ä¸ªå…¨æ–°çš„å¢ƒç•Œï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šæˆä¸ºä½ æœ€äº²å¯†çš„æœ‹å‹ï¼Œè€Œä¸æ˜¯æ•Œäººã€‚\næƒ³è§£é”æ›´å¤šè¿™ç±»è®©ä½ åŠŸåŠ›å¤§å¢çš„é»‘ç§‘æŠ€å—ï¼Ÿ\nå…³æ³¨æ¢¦å…½ç¼–ç¨‹å¾®ä¿¡å…¬ä¼—å·ï¼Œè§£é”æ›´å¤šé»‘ç§‘æŠ€ã€‚\n","wordCount":"294","inLanguage":"zh-cn","image":"https://rexai.top/cover.png","datePublished":"2025-01-27T10:00:00+08:00","dateModified":"2025-01-27T10:00:00+08:00","author":{"@type":"Person","name":"æ¢¦å…½ç¼–ç¨‹"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://rexai.top/tutorials/rust/rust-traits-and-generics-common-mistakes/"},"publisher":{"@type":"Organization","name":"æ¢¦å…½ç¼–ç¨‹","logo":{"@type":"ImageObject","url":"https://rexai.top/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://rexai.top/ accesskey=h title="æ¢¦å…½ç¼–ç¨‹ (Alt + H)">æ¢¦å…½ç¼–ç¨‹</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://rexai.top/en/ title=:en: aria-label=:en:>En</a></li></ul></div></div><button class=menu-toggle id=menu-toggle aria-label=æ‰“å¼€èœå• aria-controls=menu aria-expanded=false>
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><ul id=menu role=menubar><li role=none><a href=https://rexai.top/ title=é¦–é¡µ role=menuitem><span>é¦–é¡µ</span></a></li><li class=has-submenu role=none><a href=https://rexai.top/tutorials/ title="ğŸ“š æ•™ç¨‹" role=menuitem><span>ğŸ“š æ•™ç¨‹</span>
<span class=submenu-toggle role=button tabindex=0 aria-expanded=false aria-haspopup=true>â–¼</span></a><ul class=submenu role=menu><li role=none><a href=https://rexai.top/tutorials/rust/ title=Rust role=menuitem>Rust</a></li><li role=none><a href=https://rexai.top/tutorials/ai/ title=AIç¼–ç¨‹ role=menuitem>AIç¼–ç¨‹</a></li></ul></li><li role=none><a href=https://rexai.top/tools/ title=å·¥å…·ç²¾é€‰ role=menuitem><span>å·¥å…·ç²¾é€‰</span></a></li><li role=none><a href=https://rexai.top/news/ title="ğŸ”¥ èµ„è®¯" role=menuitem><span>ğŸ”¥ èµ„è®¯</span></a></li><li role=none><a href=https://rexai.top/tags/ title=ğŸ·ï¸æ ‡ç­¾ role=menuitem><span>ğŸ·ï¸æ ‡ç­¾</span></a></li><li role=none><a href=https://rexai.top/categories/ title=ğŸ“‚åˆ†ç±» role=menuitem><span>ğŸ“‚åˆ†ç±»</span></a></li></ul><div id=menu-overlay class=menu-overlay hidden></div></nav></header><style>.has-submenu{position:relative}#menu{overflow:visible !important}#menu li{overflow:visible}.submenu{position:absolute;top:100%;left:0;background:var(--theme);border:1px solid var(--border);border-radius:8px;box-shadow:0 4px 6px -1px rgba(0,0,0,.1);min-width:180px;z-index:1000;list-style:none;display:none;padding:.5rem 0}.submenu li{display:block;margin:0;line-height:1.5}#menu .submenu li+li{margin-inline-start:0}.submenu a{display:block;padding:.75rem 1rem;color:var(--secondary);text-decoration:none;transition:all .2s ease;border-radius:0}.submenu a:hover{background:var(--entry);color:var(--primary)}.has-submenu:hover .submenu{display:block !important}.submenu-toggle{margin-left:.25rem;font-size:.75rem;transition:transform .2s ease;display:inline-block}.has-submenu:hover .submenu-toggle{transform:rotate(180deg)}@media(max-width:768px){.menu-toggle{display:inline-flex;align-items:center;justify-content:center;width:44px;height:44px;margin-inline-end:var(--gap);border-radius:8px;border:1px solid var(--border);background:var(--theme);color:var(--primary)}#menu{position:fixed;top:0;right:0;height:100vh;width:82vw;max-width:340px;background:var(--theme);box-shadow:-2px 0 20px rgba(0,0,0,.18);transform:translateX(100%);transition:transform .25s ease;padding:calc(var(--header-height) + 10px)16px 20px;flex-direction:column;gap:4px;overflow-y:auto !important;z-index:1001}body.menu-open #menu{transform:translateX(0)}.menu-overlay{position:fixed;inset:0;background:rgba(0,0,0,.4);opacity:0;pointer-events:none;transition:opacity .2s ease;z-index:1000}body.menu-open .menu-overlay{opacity:1;pointer-events:auto}#menu li+li{margin-inline-start:0}#menu a{padding:12px 8px}.submenu{position:static;box-shadow:none;border:none;background:var(--entry);margin-top:0;margin-left:1rem;display:block;max-height:0;overflow:hidden;padding:0;transition:max-height .25s ease,padding .2s ease}.has-submenu.active .submenu{max-height:1000px;padding:4px 0 6px}.submenu-toggle{cursor:pointer}.has-submenu.active>a .submenu-toggle{transform:rotate(180deg)}}@media(min-width:769px){.menu-toggle{display:none}}.submenu a:focus-visible,#menu a:focus-visible,.menu-toggle:focus-visible,.submenu-toggle:focus-visible{outline:2px solid var(--primary);outline-offset:2px;border-radius:6px}@media(max-width:768px){#menu a.is-current,#menu a.is-current>span{border-bottom:none !important;background:var(--entry);color:var(--primary);border-radius:8px;font-weight:600}#menu a.is-current{padding:10px}#menu a{width:100%;border-radius:8px}#menu .active{border-bottom:none !important}}body.menu-open{overflow:hidden;touch-action:none}</style><script>(function(){const s=document.getElementById("menu"),t=document.getElementById("menu-toggle"),o=document.getElementById("menu-overlay");if(!s||!t||!o)return;const i=()=>window.innerWidth<=768,r=()=>{document.body.classList.add("menu-open"),t.setAttribute("aria-expanded","true"),o.hidden=!1,l()},n=()=>{document.body.classList.remove("menu-open"),t.setAttribute("aria-expanded","false"),o.hidden=!0,d(),t.focus()};t.addEventListener("click",()=>{const e=document.body.classList.contains("menu-open");e?n():r()}),o.addEventListener("click",n),window.addEventListener("keydown",e=>{e.key==="Escape"&&n()}),window.addEventListener("resize",()=>{window.innerWidth>768&&n()});const c=()=>{const e=Array.from(document.querySelectorAll(".has-submenu")),t=t=>{e.forEach(e=>{if(e!==t&&e.classList.contains("active")){e.classList.remove("active");const t=e.querySelector(".submenu-toggle");t&&t.setAttribute("aria-expanded","false")}})};e.forEach(e=>{const o=e.querySelector("a"),n=e.querySelector(".submenu-toggle"),a=e.querySelector(".submenu");if(!n||!a||!o)return;const r=t=>{n.setAttribute("aria-expanded",t?"true":"false"),e.classList.toggle("active",t)},s=()=>{const n=!e.classList.contains("active");n&&t(e),r(n)};n.addEventListener("click",e=>{if(!i())return;e.preventDefault(),e.stopPropagation(),s()}),n.addEventListener("keydown",e=>{if(!i())return;(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),e.stopPropagation(),s())}),o.addEventListener("click",e=>{if(!i())return;e.preventDefault(),e.stopPropagation(),s()})})};let e=[];const a=t=>{if(t.key!=="Tab"||!document.body.classList.contains("menu-open"))return;e=Array.from(s.querySelectorAll('a, button, [tabindex="0"]'));const n=e[0],o=e[e.length-1];if(!n||!o)return;t.shiftKey&&document.activeElement===n?(t.preventDefault(),o.focus()):!t.shiftKey&&document.activeElement===o&&(t.preventDefault(),n.focus())},l=()=>{e=Array.from(s.querySelectorAll('a, button, [tabindex="0"]')),e.length&&e[0].focus(),document.addEventListener("keydown",a)},d=()=>{document.removeEventListener("keydown",a)};c(),s.addEventListener("click",e=>{const t=e.target;if(!(t instanceof Element)||!i())return;const s=t.closest("a");if(!s)return;const o=s.closest("li"),a=o&&o.classList.contains("has-submenu");a||n()})})()</script><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Rustå†…å·ç»ˆææŒ‡å—ï¼š5ä¸ªè®©åŒäº‹é«˜æ”€ä¸èµ·çš„Traitä¸æ³›å‹éªšæ“ä½œ</h1><div class=post-description>æ·±å…¥è§£æRustä¸­Traitså’ŒGenericsçš„5ä¸ªå¸¸è§é™·é˜±ï¼Œä»æ³›å‹æ»¥ç”¨ã€Traitçº¦æŸæ··ä¹±ã€é™æ€åŠ¨æ€åˆ†å‘æ··æ·†ã€å…³è”ç±»å‹ä½¿ç”¨åˆ°ç»“æ„ä½“çº¦æŸæ»¥ç”¨ï¼Œå¸®ä½ å†™å‡ºæ›´ä¼˜é›…é«˜æ•ˆçš„Rustä»£ç </div><div class=post-meta><span title='2025-01-27 10:00:00 +0800 +0800'>January 27, 2025</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;294 words&nbsp;Â·&nbsp;æ¢¦å…½ç¼–ç¨‹</div></header><figure class=entry-cover><img loading=eager srcset='https://rexai.top/tutorials/rust/rust-traits-and-generics-common-mistakes/cover_hu_ab6eb6a7812b3c2b.png 360w,https://rexai.top/tutorials/rust/rust-traits-and-generics-common-mistakes/cover_hu_eaa828f4cab07743.png 480w,https://rexai.top/tutorials/rust/rust-traits-and-generics-common-mistakes/cover_hu_e3898d310e90f07c.png 720w,https://rexai.top/tutorials/rust/rust-traits-and-generics-common-mistakes/cover_hu_e3b7c00a561315f1.png 1080w,https://rexai.top/tutorials/rust/rust-traits-and-generics-common-mistakes/cover_hu_98e4b9067ab49466.png 1500w,https://rexai.top/tutorials/rust/rust-traits-and-generics-common-mistakes/cover.png 2163w' src=https://rexai.top/tutorials/rust/rust-traits-and-generics-common-mistakes/cover.png sizes="(min-width: 768px) 720px, 100vw" width=2163 height=1441 alt="Rust Traitså’ŒGenericså¸¸è§é™·é˜±æŒ‡å—"><figcaption>Rustå†…å·ç»ˆææŒ‡å—ï¼šæŒæ¡Traitså’ŒGenericsçš„æ­£ç¡®ç”¨æ³•</figcaption></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#rust%e5%86%85%e5%8d%b7%e7%bb%88%e6%9e%81%e6%8c%87%e5%8d%975%e4%b8%aa%e8%ae%a9%e5%90%8c%e4%ba%8b%e9%ab%98%e6%94%80%e4%b8%8d%e8%b5%b7%e7%9a%84trait%e4%b8%8e%e6%b3%9b%e5%9e%8b%e9%aa%9a%e6%93%8d%e4%bd%9c aria-label='Rustå†…å·ç»ˆææŒ‡å—ï¼š5ä¸ªè®©åŒäº‹"é«˜æ”€ä¸èµ·"çš„Traitä¸æ³›å‹éªšæ“ä½œ'>Rustå†…å·ç»ˆææŒ‡å—ï¼š5ä¸ªè®©åŒäº‹"é«˜æ”€ä¸èµ·"çš„Traitä¸æ³›å‹éªšæ“ä½œ</a><ul><li><a href=#%e5%a4%a9%e5%9d%91%e4%b8%80%e5%b1%a0%e9%be%99%e5%88%80%e7%94%a8%e6%9d%a5%e5%88%87%e8%8f%9c--%e4%b8%8d%e5%bf%85%e8%a6%81%e7%9a%84%e6%b3%9b%e5%9e%8b%e6%bb%a5%e7%94%a8 aria-label="å¤©å‘ä¸€ï¼šå± é¾™åˆ€ç”¨æ¥åˆ‡èœ â€”â€” ä¸å¿…è¦çš„æ³›å‹æ»¥ç”¨">å¤©å‘ä¸€ï¼šå± é¾™åˆ€ç”¨æ¥åˆ‡èœ â€”â€” ä¸å¿…è¦çš„æ³›å‹æ»¥ç”¨</a></li><li><a href=#%e5%a4%a9%e5%9d%91%e4%ba%8c%e4%bb%a3%e7%a0%81%e7%95%8c%e7%9a%84%e6%84%8f%e9%9d%a2-%e6%9d%82%e4%b9%b1%e6%97%a0%e7%ab%a0%e7%9a%84trait%e7%ba%a6%e6%9d%9f aria-label='å¤©å‘äºŒï¼šä»£ç ç•Œçš„"æ„é¢"â€”â€” æ‚ä¹±æ— ç« çš„Traitçº¦æŸ'>å¤©å‘äºŒï¼šä»£ç ç•Œçš„"æ„é¢"â€”â€” æ‚ä¹±æ— ç« çš„Traitçº¦æŸ</a></li><li><a href=#%e5%a4%a9%e5%9d%91%e4%b8%89%e9%94%99%e6%8a%8a%e9%9d%99%e6%80%81%e5%bd%93%e5%8a%a8%e6%80%81-%e6%b7%b7%e6%b7%86%e6%b3%9b%e5%9e%8b%e4%b8%8etrait%e5%af%b9%e8%b1%a1 aria-label='å¤©å‘ä¸‰ï¼šé”™æŠŠ"é™æ€"å½“"åŠ¨æ€"â€”â€” æ··æ·†æ³›å‹ä¸Traitå¯¹è±¡'>å¤©å‘ä¸‰ï¼šé”™æŠŠ"é™æ€"å½“"åŠ¨æ€"â€”â€” æ··æ·†æ³›å‹ä¸Traitå¯¹è±¡</a></li><li><a href=#%e5%a4%a9%e5%9d%91%e5%9b%9b%e7%bb%99trait%e5%ae%b6%e6%97%8f%e6%b7%bb%e4%b9%b1%e4%b8%8d%e7%94%a8%e5%85%b3%e8%81%94%e7%b1%bb%e5%9e%8b%e8%87%aa%e6%89%be%e9%ba%bb%e7%83%a6 aria-label='å¤©å‘å››ï¼šç»™Trait"å®¶æ—"æ·»ä¹±â€”â€”ä¸ç”¨å…³è”ç±»å‹ï¼Œè‡ªæ‰¾éº»çƒ¦'>å¤©å‘å››ï¼šç»™Trait"å®¶æ—"æ·»ä¹±â€”â€”ä¸ç”¨å…³è”ç±»å‹ï¼Œè‡ªæ‰¾éº»çƒ¦</a></li><li><a href=#%e5%a4%a9%e5%9d%91%e4%ba%94%e8%bf%87%e6%97%a9%e7%9a%84%e6%89%bf%e8%af%ba%e5%9c%a8%e7%bb%93%e6%9e%84%e4%bd%93%e4%b8%8a%e6%bb%a5%e7%94%a8%e7%ba%a6%e6%9d%9f aria-label='å¤©å‘äº”ï¼šè¿‡æ—©çš„"æ‰¿è¯º"â€”â€”åœ¨ç»“æ„ä½“ä¸Šæ»¥ç”¨çº¦æŸ'>å¤©å‘äº”ï¼šè¿‡æ—©çš„"æ‰¿è¯º"â€”â€”åœ¨ç»“æ„ä½“ä¸Šæ»¥ç”¨çº¦æŸ</a></li><li><a href=#%e7%bb%93%e8%af%ad%e4%bb%8e%e5%a4%a9%e5%9d%91%e5%88%b0%e9%80%9a%e9%80%94 aria-label='ç»“è¯­ï¼šä»"å¤©å‘"åˆ°"é€šé€”"'>ç»“è¯­ï¼šä»"å¤©å‘"åˆ°"é€šé€”"</a></li></ul></li></ul></div></details></div><div class=post-content><h1 id=rustå†…å·ç»ˆææŒ‡å—5ä¸ªè®©åŒäº‹é«˜æ”€ä¸èµ·çš„traitä¸æ³›å‹éªšæ“ä½œ>Rustå†…å·ç»ˆææŒ‡å—ï¼š5ä¸ªè®©åŒäº‹"é«˜æ”€ä¸èµ·"çš„Traitä¸æ³›å‹éªšæ“ä½œ<a hidden class=anchor aria-hidden=true href=#rustå†…å·ç»ˆææŒ‡å—5ä¸ªè®©åŒäº‹é«˜æ”€ä¸èµ·çš„traitä¸æ³›å‹éªšæ“ä½œ>#</a></h1><p><strong>å…³æ³¨æ¢¦å…½ç¼–ç¨‹å¾®ä¿¡å…¬ä¼—å·ï¼Œå¹½é»˜å­¦ä¹ Rust</strong></p><p>ä½ å¥½ï¼Œå‹‡æ•¢çš„Rustaceanï¼ˆRustå¼€å‘è€…ï¼‰ï¼</p><p>ä½ æ˜¯å¦æ›¾è¢«Rustçš„ç¼–è¯‘å™¨"æŒ‰åœ¨åœ°ä¸Šæ‘©æ“¦"ï¼Ÿé¢å¯¹ç€ä¸€å±å¹•å¤©ä¹¦èˆ¬çš„é”™è¯¯ä¿¡æ¯ï¼Œæ€€ç–‘è‡ªå·±æ˜¯ä¸æ˜¯é€‰é”™äº†ç¼–ç¨‹è¯­è¨€ï¼Ÿåˆ«æ€•ï¼Œä½ ä¸æ˜¯ä¸€ä¸ªäººåœ¨æˆ˜æ–—ã€‚</p><p>Rustæœ€å¼ºå¤§çš„æ­¦å™¨ï¼Œè«è¿‡äºå®ƒçš„"é›¶æˆæœ¬æŠ½è±¡"èƒ½åŠ›ã€‚è€Œè¿™å¥—æ­¦åŠŸçš„æ ¸å¿ƒç§˜ç±ï¼Œå°±æ˜¯<strong>Traitsï¼ˆç‰¹æ€§ï¼‰</strong>ã€<strong>Genericsï¼ˆæ³›å‹ï¼‰<strong>å’Œ</strong>Whereï¼ˆçº¦æŸï¼‰</strong>ã€‚ç”¨å¥½äº†ï¼Œä½ çš„ä»£ç ä¼šåƒè¯—ä¸€æ ·ä¼˜é›…ï¼ŒåƒF1èµ›è½¦ä¸€æ ·è¿…çŒ›ã€‚</p><p>ä½†â€¦â€¦å¦‚æœç”¨é”™äº†å‘¢ï¼Ÿå®ƒä»¬ä¼šç¬é—´å˜æˆä¸€é”…è®©ä½ å¤´çš®å‘éº»çš„"æ„å¤§åˆ©é¢"ï¼Œç¼–è¯‘é”™è¯¯èƒ½ç»•åœ°çƒä¸‰åœˆï¼Œè¶³ä»¥æŠŠä»»ä½•ä¸€ä¸ªç¼–ç¨‹æ–°æ‰‹å“å¾—è¿å¤œå¸è½½Rustã€‚</p><p>ä»Šå¤©æˆ‘å°†ä¸ºä½ æ­ç¤ºå¹¶å¡«å¹³é‚£äº›æœ€å¸¸è§çš„Traitä¸æ³›å‹"å¤©å‘"ã€‚åç¨³äº†ï¼Œå‘è½¦ï¼</p><h2 id=å¤©å‘ä¸€å± é¾™åˆ€ç”¨æ¥åˆ‡èœ--ä¸å¿…è¦çš„æ³›å‹æ»¥ç”¨>å¤©å‘ä¸€ï¼šå± é¾™åˆ€ç”¨æ¥åˆ‡èœ â€”â€” ä¸å¿…è¦çš„æ³›å‹æ»¥ç”¨<a hidden class=anchor aria-hidden=true href=#å¤©å‘ä¸€å± é¾™åˆ€ç”¨æ¥åˆ‡èœ--ä¸å¿…è¦çš„æ³›å‹æ»¥ç”¨>#</a></h2><p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ‹¥æœ‰äº†ä¸€æŠŠå‰Šé“å¦‚æ³¥çš„å± é¾™å®åˆ€ï¼Œä½†ä½ æ¯å¤©éƒ½ç”¨å®ƒæ¥åˆ‡åœŸè±†ä¸ã€‚æ˜¯ä¸æ˜¯æœ‰ç‚¹å¤§æå°ç”¨äº†ï¼Ÿ</p><p><strong>ä½ å¯èƒ½æ­£åœ¨çŠ¯çš„é”™ï¼š</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>// çœ‹èµ·æ¥æ²¡æ¯›ç—…ï¼Œå¯¹å§ï¼Ÿ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>print_value</span><span style=color:#f92672>&lt;</span>T: <span style=color:#a6e22e>std</span>::fmt::Debug<span style=color:#f92672>&gt;</span>(value: <span style=color:#a6e22e>T</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>println!</span>(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{:?}</span><span style=color:#e6db74>&#34;</span>, value);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>æŠ€æœ¯ä¸Šè®²ï¼Œè¿™ä»£ç èƒ½è·‘ã€‚ä½†é—®é¢˜æ˜¯ï¼Œå¦‚æœä½ åœ¨æ•´ä¸ªé¡¹ç›®ä¸­ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ä¼ è¿›å»çš„<strong>æ°¸è¿œéƒ½åªæ˜¯ä¸€ä¸ª<code>i32</code>ç±»å‹</strong>ï¼Œé‚£ä½ ä¸ºä»€ä¹ˆè¦ç”¨æ³›å‹ï¼Ÿ</p><p>ä½ ä¸ºäº†ä¸€ä¸ªæ ¹æœ¬ä¸å­˜åœ¨çš„"çµæ´»æ€§"ï¼Œå‡­ç©ºå¢åŠ äº†ä»£ç çš„å¤æ‚åº¦ã€‚ç¼–è¯‘å™¨éœ€è¦ä¸ºæ¯ä¸ªå…·ä½“ç±»å‹è¿›è¡Œ"å•æ€åŒ–"ï¼ˆMonomorphizationï¼‰ï¼Œç”Ÿæˆé¢å¤–çš„ä»£ç ã€‚è¿™å°±åƒä½ ä¸ºäº†å¶å°”å¯èƒ½è¦æ‹›å¾…ä¸€ä½å›½ç‹ï¼ŒæŠŠå®¶é‡Œæ‰€æœ‰æˆ¿é—´éƒ½æŒ‰äº”æ˜Ÿçº§æ€»ç»Ÿå¥—æˆ¿è£…ä¿®äº†ä¸€éï¼Œç»“æœæ¥çš„æ°¸è¿œæ˜¯é‚»å±…è€ç‹ã€‚</p><p><strong>æ›´æ˜æ™ºçš„åšæ³•ï¼š</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>// æœ´å®æ— åï¼Œä½†é«˜æ•ˆ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>print_value</span>(value: <span style=color:#66d9ef>i32</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>println!</span>(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{:?}</span><span style=color:#e6db74>&#34;</span>, value);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>æˆ‘çš„ç¥ä¹‹ç®´è¨€ï¼š</strong> è®°ä½ï¼Œæ³›å‹æ˜¯ä½ çš„è¶…èƒ½åŠ›ï¼Œä½†åˆ«è¿‡æ—©åœ°ç‚«è€€è‚Œè‚‰ã€‚åªæœ‰å½“ä½ <strong>çœŸæ­£éœ€è¦</strong>å¤„ç†å¤šç§ç±»å‹æ—¶ï¼Œå†å»å¬å”¤æ³›å‹è¿™æ¡"ç¥é¾™"ï¼Œå¦åˆ™ï¼Œä»å…·ä½“ç±»å‹å¼€å§‹ï¼Œæ°¸è¿œæ˜¯æœ€é«˜æ•ˆã€æœ€æ¸…æ™°çš„é€‰æ‹©ã€‚</p><h2 id=å¤©å‘äºŒä»£ç ç•Œçš„æ„é¢-æ‚ä¹±æ— ç« çš„traitçº¦æŸ>å¤©å‘äºŒï¼šä»£ç ç•Œçš„"æ„é¢"â€”â€” æ‚ä¹±æ— ç« çš„Traitçº¦æŸ<a hidden class=anchor aria-hidden=true href=#å¤©å‘äºŒä»£ç ç•Œçš„æ„é¢-æ‚ä¹±æ— ç« çš„traitçº¦æŸ>#</a></h2><p>å½“ä½ çš„å‡½æ•°éœ€è¦ä¸æ­¢ä¸€ä¸ªæ³›å‹å‚æ•°ï¼Œå¹¶ä¸”æ¯ä¸ªå‚æ•°éƒ½å¸¦ç€ä¸€å †çº¦æŸæ—¶ï¼Œä½ çš„å‡½æ•°ç­¾åå¾ˆå¿«å°±ä¼šå˜æˆä¸€ç¢—çœ‹ä¸æ‡‚çš„"æ„å¤§åˆ©é¢æ¡"ã€‚</p><p><strong>ä½ å¯èƒ½æ­£åœ¨çŠ¯çš„é”™ï¼š</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>// ä¸€ä¸ªå‚æ•°è¿˜è¡Œï¼Œä¸¤ä¸ªè¯•è¯•ï¼Ÿ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>log_json</span><span style=color:#f92672>&lt;</span>T: <span style=color:#a6e22e>serde</span>::Serialize <span style=color:#f92672>+</span> std::fmt::Debug <span style=color:#f92672>+</span> Clone<span style=color:#f92672>&gt;</span>(item: <span style=color:#a6e22e>T</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>å½“çº¦æŸæ¡ä»¶è¶Šæ¥è¶Šå¤šï¼Œå°–æ‹¬å· <code>&lt;></code> é‡Œçš„å†…å®¹ä¼šå˜å¾—è¶Šæ¥è¶Šé•¿ï¼Œå¯è¯»æ€§ç›´çº¿ä¸‹é™ï¼Œç»´æŠ¤èµ·æ¥ç®€ç›´æ˜¯å™©æ¢¦ã€‚</p><p><strong>æ›´æ˜æ™ºçš„åšæ³•ï¼šè®©<code>where</code>å­å¥æ¥æ‹¯æ•‘ä½ ï¼</strong></p><p><code>where</code>å­å¥å°±åƒä¸€ä¸ªä¸“ä¸šçš„å›¾ä¹¦ç®¡ç†å‘˜ï¼Œå®ƒä¼šæŠŠæ‰€æœ‰ä¹±ä¸ƒå…«ç³Ÿçš„çº¦æŸæ¡ä»¶æ•´é½åœ°æ”¶çº³èµ·æ¥ï¼Œè®©ä½ çš„å‡½æ•°ç­¾åæ¸…çˆ½å¾—åƒå¤å¤©çš„é£ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>// ä½¿ç”¨ whereï¼Œä»£ç ç¬é—´æ¸…çˆ½
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>log_json</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span>(item: <span style=color:#a6e22e>T</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>where</span>
</span></span><span style=display:flex><span>    T: <span style=color:#a6e22e>serde</span>::Serialize <span style=color:#f92672>+</span> std::fmt::Debug <span style=color:#f92672>+</span> Clone,
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// å¤šä¸ªå‚æ•°ï¼Ÿå°èœä¸€ç¢Ÿï¼
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>process_data</span><span style=color:#f92672>&lt;</span>T, U<span style=color:#f92672>&gt;</span>(a: <span style=color:#a6e22e>T</span>, b: <span style=color:#a6e22e>U</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>where</span>
</span></span><span style=display:flex><span>    T: Clone <span style=color:#f92672>+</span> std::fmt::Debug,
</span></span><span style=display:flex><span>    U: Default <span style=color:#f92672>+</span> std::fmt::Debug,
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p><strong>æˆ‘çš„ç¥ä¹‹ç®´è¨€ï¼š</strong> æŠŠçº¦æŸæ¡ä»¶ä»å°–æ‹¬å·é‡Œè§£æ”¾å‡ºæ¥ï¼Œäº¤ç»™<code>where</code>å­å¥å»ç®¡ç†ã€‚è¿™ä¸ä»…æ˜¯é£æ ¼é—®é¢˜ï¼Œæ›´æ˜¯ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§çš„ç”Ÿå‘½çº¿ã€‚</p><h2 id=å¤©å‘ä¸‰é”™æŠŠé™æ€å½“åŠ¨æ€-æ··æ·†æ³›å‹ä¸traitå¯¹è±¡>å¤©å‘ä¸‰ï¼šé”™æŠŠ"é™æ€"å½“"åŠ¨æ€"â€”â€” æ··æ·†æ³›å‹ä¸Traitå¯¹è±¡<a hidden class=anchor aria-hidden=true href=#å¤©å‘ä¸‰é”™æŠŠé™æ€å½“åŠ¨æ€-æ··æ·†æ³›å‹ä¸traitå¯¹è±¡>#</a></h2><p>è¿™æ˜¯æ–°æ‰‹æœ€å®¹æ˜“æ ½è¿›å»çš„å‘ã€‚æ³›å‹å’ŒTraitå¯¹è±¡ï¼ˆ<code>dyn Trait</code>ï¼‰éƒ½èƒ½å®ç°å¤šæ€ï¼Œä½†å®ƒä»¬çš„åº”ç”¨åœºæ™¯æˆªç„¶ä¸åŒã€‚</p><ul><li><strong>æ³›å‹ï¼ˆGenericsï¼‰</strong>ï¼š<strong>é™æ€åˆ†å‘</strong>ã€‚åœ¨ç¼–è¯‘æ—¶ï¼Œç¼–è¯‘å™¨å°±çŸ¥é“æ‰€æœ‰å…·ä½“çš„ç±»å‹ï¼Œå¹¶ä¸ºæ¯ä¸ªç±»å‹ç”Ÿæˆä¸€ä»½ä»£ç ã€‚å¿«ï¼Œä½†ä¸å¤Ÿçµæ´»ï¼Œä½ æ— æ³•åœ¨ä¸€ä¸ªé›†åˆé‡Œå­˜æ”¾ä¸åŒç±»å‹çš„å®ä¾‹ã€‚</li><li><strong>Traitå¯¹è±¡ï¼ˆ<code>&amp;dyn Trait</code>ï¼‰</strong>ï¼š<strong>åŠ¨æ€åˆ†å‘</strong>ã€‚åœ¨è¿è¡Œæ—¶ï¼Œé€šè¿‡è™šå‡½æ•°è¡¨ï¼ˆvtableï¼‰æ¥è°ƒç”¨ç›¸åº”çš„æ–¹æ³•ã€‚ç¨å¾®æ…¢ä¸€ç‚¹ç‚¹ï¼ˆå‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ï¼‰ï¼Œä½†æå…¶çµæ´»ï¼Œå…è®¸ä½ åˆ›å»ºå¼‚æ„é›†åˆï¼ˆæ¯”å¦‚ä¸€ä¸ªå­˜æ”¾äº†çŒ«ã€ç‹—ã€é¸Ÿçš„åŠ¨ç‰©åˆ—è¡¨ï¼‰ã€‚</li></ul><p><strong>ä½ å¯èƒ½æ­£åœ¨çŠ¯çš„é”™ï¼š</strong></p><p>ä½ æƒ³åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œèƒ½æ¥å—ä»»ä½•å¯ä»¥"ç»˜åˆ¶"è‡ªå·±çš„ä¸œè¥¿ï¼Œäºæ˜¯ä½ å†™äº†æ³›å‹ç‰ˆæœ¬ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>trait</span> Drawable {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>draw</span>(<span style=color:#f92672>&amp;</span>self);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// è¿™ä¸ªå‡½æ•°ä¸€æ¬¡åªèƒ½æ¥å—ä¸€ç§å…·ä½“çš„ Drawable ç±»å‹
</span></span></span><span style=display:flex><span><span style=color:#75715e>// ä½ æ²¡æ³•ç»™å®ƒä¼ ä¸€ä¸ªæ—¢æœ‰ Circle åˆæœ‰ Square çš„åˆ—è¡¨
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>draw_static</span><span style=color:#f92672>&lt;</span>T: <span style=color:#a6e22e>Drawable</span><span style=color:#f92672>&gt;</span>(item: <span style=color:#a6e22e>T</span>) {
</span></span><span style=display:flex><span>    item.draw();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>æ›´æ˜æ™ºçš„åšæ³•ï¼šå½“ä½ éœ€è¦å¼‚æ„é›†åˆæ—¶ï¼Œæ‹¥æŠ±<code>dyn Trait</code></strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>// ä½¿ç”¨ Trait å¯¹è±¡ï¼Œæ¥å—ä»»ä½•å®ç°äº† Drawable çš„ç±»å‹
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>draw_dynamic</span>(item: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>dyn</span> Drawable) {
</span></span><span style=display:flex><span>    item.draw();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// ç»ˆæç”¨æ³•ï¼šæ¸²æŸ“ä¸€ä¸ªåŒ…å«å„ç§å½¢çŠ¶çš„åœºæ™¯
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>render_scene</span>(items: Vec<span style=color:#f92672>&lt;</span>Box<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>dyn</span> Drawable<span style=color:#f92672>&gt;&gt;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> item <span style=color:#66d9ef>in</span> items {
</span></span><span style=display:flex><span>        item.draw();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>æˆ‘çš„ç¥ä¹‹ç®´è¨€ï¼š</strong> ç®€å•è®°ï¼šå½“ä½ éœ€è¦ä¸€ä¸ªå‡½æ•°æˆ–ç»“æ„ä½“åœ¨<strong>ç¼–è¯‘æ—¶</strong>å°±ç¡®å®šç±»å‹ï¼Œè¿½æ±‚æè‡´æ€§èƒ½æ—¶ï¼Œç”¨æ³›å‹ã€‚å½“ä½ éœ€è¦åœ¨<strong>è¿è¡Œæ—¶</strong>å¤„ç†ä¸€ä¸ªåŒ…å«äº†å¤šç§ä¸åŒç±»å‹ï¼ˆä½†éƒ½å®ç°äº†åŒä¸€ä¸ªTraitï¼‰çš„é›†åˆæ—¶ï¼Œè¯·æ¯«ä¸çŠ¹è±«åœ°ä½¿ç”¨Traitå¯¹è±¡ã€‚è¿™æ‰æ˜¯"é¸­å­ç±»å‹"åœ¨Rustä¸­çš„æ­£ç¡®æ‰“å¼€æ–¹å¼ã€‚</p><h2 id=å¤©å‘å››ç»™traitå®¶æ—æ·»ä¹±ä¸ç”¨å…³è”ç±»å‹è‡ªæ‰¾éº»çƒ¦>å¤©å‘å››ï¼šç»™Trait"å®¶æ—"æ·»ä¹±â€”â€”ä¸ç”¨å…³è”ç±»å‹ï¼Œè‡ªæ‰¾éº»çƒ¦<a hidden class=anchor aria-hidden=true href=#å¤©å‘å››ç»™traitå®¶æ—æ·»ä¹±ä¸ç”¨å…³è”ç±»å‹è‡ªæ‰¾éº»çƒ¦>#</a></h2><p>å½“ä¸€ä¸ªTraitå†…éƒ¨çš„å¤šä¸ªæ–¹æ³•éƒ½ä¾èµ–äºåŒä¸€ä¸ª"é™„å±ç±»å‹"æ—¶ï¼Œä½¿ç”¨æ³›å‹ä¼šè®©äº‹æƒ…å˜å¾—å¼‚å¸¸ç¬¨æ‹™ã€‚</p><p><strong>ä½ å¯èƒ½æ­£åœ¨çŠ¯çš„é”™ï¼š</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>// ç”¨æ³›å‹æ¥å®šä¹‰å­˜å‚¨çš„ç‰©å“ç±»å‹ï¼Œå¤ªå•°å—¦äº†ï¼
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>trait</span> Storage<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>save</span>(<span style=color:#f92672>&amp;</span>self, item: <span style=color:#a6e22e>T</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>load</span>(<span style=color:#f92672>&amp;</span>self) -&gt; <span style=color:#a6e22e>T</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>è¿™ç§å†™æ³•åœ¨å®ç°ï¼ˆ<code>impl</code>ï¼‰çš„æ—¶å€™ä¼šéå¸¸åˆ«æ‰­ï¼Œå› ä¸ºä½ éœ€è¦åœ¨ä»»ä½•åœ°æ–¹éƒ½æ‹–ç€é‚£ä¸ªæ³›å‹<code>T</code>ã€‚</p><p><strong>æ›´æ˜æ™ºçš„åšæ³•ï¼šä½¿ç”¨å…³è”ç±»å‹ï¼ˆAssociated Typesï¼‰</strong></p><p>å…³è”ç±»å‹è®©ä½ çš„Traitæ›´åŠ "å†…èš"å’Œæ¸…æ™°ã€‚å®ƒåƒæ˜¯åœ¨è¯´ï¼š&ldquo;ä»»ä½•å®ç°æˆ‘è¿™ä¸ª<code>Storage</code> Traitçš„ç±»å‹ï¼Œéƒ½å¿…é¡»<strong>å†…éƒ¨æŒ‡å®š</strong>ä¸€ä¸ªå®ƒæ‰€å­˜å‚¨çš„<code>Item</code>ç±»å‹ã€‚&rdquo;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>trait</span> Storage {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Item</span>; <span style=color:#75715e>// åœ¨è¿™é‡Œå®šä¹‰å…³è”ç±»å‹
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>save</span>(<span style=color:#f92672>&amp;</span>self, item: <span style=color:#a6e22e>Self</span>::Item);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>load</span>(<span style=color:#f92672>&amp;</span>self) -&gt; <span style=color:#a6e22e>Self</span>::Item;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// å®ç°èµ·æ¥å¤šä¹ˆå¹²å‡€ï¼
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>MemoryStorage</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>impl</span> Storage <span style=color:#66d9ef>for</span> MemoryStorage {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Item</span> <span style=color:#f92672>=</span> String; <span style=color:#75715e>// ç›´æ¥åœ¨è¿™é‡ŒæŒ‡å®šå…·ä½“ç±»å‹
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>save</span>(<span style=color:#f92672>&amp;</span>self, item: String) { <span style=color:#75715e>/* ... */</span> }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>load</span>(<span style=color:#f92672>&amp;</span>self) -&gt; String { <span style=color:#75715e>/* ... */</span> }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>æˆ‘çš„ç¥ä¹‹ç®´è¨€ï¼š</strong> å½“Traitä¸­çš„æŸä¸ªç±»å‹ä¸å®ç°è¯¥Traitçš„ç±»å‹æœ¬èº«å¼ºç›¸å…³æ—¶ï¼Œè¯·ä½¿ç”¨å…³è”ç±»å‹ã€‚å®ƒèƒ½æå¤§åœ°ç®€åŒ–APIï¼Œè®©ä½ çš„Traitè®¾è®¡æ›´åŠ ä¼˜é›…ã€‚</p><h2 id=å¤©å‘äº”è¿‡æ—©çš„æ‰¿è¯ºåœ¨ç»“æ„ä½“ä¸Šæ»¥ç”¨çº¦æŸ>å¤©å‘äº”ï¼šè¿‡æ—©çš„"æ‰¿è¯º"â€”â€”åœ¨ç»“æ„ä½“ä¸Šæ»¥ç”¨çº¦æŸ<a hidden class=anchor aria-hidden=true href=#å¤©å‘äº”è¿‡æ—©çš„æ‰¿è¯ºåœ¨ç»“æ„ä½“ä¸Šæ»¥ç”¨çº¦æŸ>#</a></h2><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å¾®å¦™ä½†å½±å“æ·±è¿œçš„åä¹ æƒ¯ã€‚</p><p><strong>ä½ å¯èƒ½æ­£åœ¨çŠ¯çš„é”™ï¼š</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>// åœ¨å®šä¹‰ç»“æ„ä½“æ—¶å°±åŠ ä¸Šäº† Display çº¦æŸ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Wrapper</span><span style=color:#f92672>&lt;</span>T: <span style=color:#a6e22e>std</span>::fmt::Display<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    value: <span style=color:#a6e22e>T</span>,
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>é—®é¢˜æ¥äº†ï¼šè¿™æ„å‘³ç€ï¼Œä½ <strong>ç”šè‡³æ— æ³•åˆ›å»ºä¸€ä¸ª<code>Wrapper</code>å®ä¾‹</strong>ï¼Œé™¤éå®ƒé‡Œé¢çš„<code>T</code>ç±»å‹å®ç°äº†<code>Display</code> Traitâ€”â€”å“ªæ€•ä½ æš‚æ—¶æ ¹æœ¬ä¸æ‰“ç®—æ‰“å°å®ƒï¼è¿™ä¸ªçº¦æŸå¤ªéœ¸é“äº†ã€‚</p><p><strong>æ›´æ˜æ™ºçš„åšæ³•ï¼šåªåœ¨éœ€è¦æ—¶æ‰æ·»åŠ çº¦æŸ</strong></p><p>æŠŠçº¦æŸä»ç»“æ„ä½“å®šä¹‰ä¸Šç§»åˆ°çœŸæ­£éœ€è¦å®ƒçš„<code>impl</code>å—æˆ–æ–¹æ³•ä¸Šã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>// ç»“æ„ä½“æœ¬èº«æ²¡æœ‰ä»»ä½•çº¦æŸ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Wrapper</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    value: <span style=color:#a6e22e>T</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// åªåœ¨éœ€è¦æ‰“å°çš„ show æ–¹æ³•ä¸Šæ·»åŠ  Display çº¦æŸ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>impl</span><span style=color:#f92672>&lt;</span>T: <span style=color:#a6e22e>std</span>::fmt::Display<span style=color:#f92672>&gt;</span> Wrapper<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>show</span>(<span style=color:#f92672>&amp;</span>self) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>println!</span>(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#34;</span>, self.value);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>æˆ‘çš„ç¥ä¹‹ç®´è¨€ï¼š</strong> ç»™äºˆä½ çš„ç»“æ„ä½“æœ€å¤§çš„è‡ªç”±ã€‚ä¸è¦åœ¨å®šä¹‰æ—¶å°±ç”¨Traitçº¦æŸæŠŠå®ƒ"é”æ­»"ã€‚åªåœ¨ç‰¹å®šçš„æ–¹æ³•å®ç°ï¼ˆ<code>impl</code>ï¼‰ä¸­æå‡ºä½ çš„è¦æ±‚ï¼Œè¿™æ‰æ˜¯"æœ€å°æƒé™åŸåˆ™"çš„ç²¾é«“ã€‚</p><h2 id=ç»“è¯­ä»å¤©å‘åˆ°é€šé€”>ç»“è¯­ï¼šä»"å¤©å‘"åˆ°"é€šé€”"<a hidden class=anchor aria-hidden=true href=#ç»“è¯­ä»å¤©å‘åˆ°é€šé€”>#</a></h2><p>æ­å–œä½ ï¼Œä½ å·²ç»æˆåŠŸç»•è¿‡äº†è¿™äº”ä¸ªæœ€å±é™©çš„"å¤©å‘"ï¼</p><p>Traitså’Œæ³›å‹æ˜¯Rustèµ‹äºˆä½ çš„å± é¾™ä¹‹æŠ€ï¼Œå®ƒä»¬å¼ºå¤§ã€çµæ´»ï¼Œä½†ä¹Ÿéœ€è¦æ™ºæ…§å’Œçºªå¾‹å»é©¾é©­ã€‚è®°ä½ä»Šå¤©å­¦åˆ°çš„ï¼š</p><ul><li><strong>ä»å…·ä½“åˆ°æŠ½è±¡</strong>ï¼Œä¸è¦æ»¥ç”¨æ³›å‹ã€‚</li><li><strong>ç”¨<code>where</code></strong>ï¼Œç»™ä½ çš„ä»£ç ç­¾å"åšä¿æ´"ã€‚</li><li><strong>åˆ†æ¸…é™æ€ä¸åŠ¨æ€</strong>ï¼Œåœ¨æ³›å‹å’Œ<code>dyn Trait</code>é—´åšå‡ºæ­£ç¡®é€‰æ‹©ã€‚</li><li><strong>æ‹¥æŠ±å…³è”ç±»å‹</strong>ï¼Œè®¾è®¡æ›´æ¸…æ™°çš„Traitã€‚</li><li><strong>è®©çº¦æŸ"æ°å¦‚å…¶åˆ†"</strong>ï¼Œä¸è¦è¿‡æ—©åœ°é™åˆ¶ä½ çš„ç»“æ„ä½“ã€‚</li></ul><p>æŒæ¡äº†è¿™äº›ï¼Œä½ çš„Rustä»£ç å°†æå‡åˆ°ä¸€ä¸ªå…¨æ–°çš„å¢ƒç•Œï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šæˆä¸ºä½ æœ€äº²å¯†çš„æœ‹å‹ï¼Œè€Œä¸æ˜¯æ•Œäººã€‚</p><p>æƒ³è§£é”æ›´å¤šè¿™ç±»è®©ä½ åŠŸåŠ›å¤§å¢çš„é»‘ç§‘æŠ€å—ï¼Ÿ</p><p><strong>å…³æ³¨æ¢¦å…½ç¼–ç¨‹å¾®ä¿¡å…¬ä¼—å·ï¼Œè§£é”æ›´å¤šé»‘ç§‘æŠ€</strong>ã€‚</p></div><section class=post-actions aria-label="post actions"><div class=post-actions__group><div class=post-actions__item><script type=text/javascript src=https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js data-name=bmc-button data-slug=winbbryz data-color=#FFDD00 data-emoji data-font=Cookie data-text="Buy me a coffee" data-outline-color=#000000 data-font-color=#000000 data-coffee-color=#ffffff></script></div></div></section><footer class=post-footer><ul class=post-tags><li><a href=https://rexai.top/tags/rust/>Rust</a></li><li><a href=https://rexai.top/tags/traits/>Traits</a></li><li><a href=https://rexai.top/tags/generics/>Generics</a></li><li><a href=https://rexai.top/tags/%E7%BC%96%E7%A8%8B%E6%95%99%E7%A8%8B/>ç¼–ç¨‹æ•™ç¨‹</a></li><li><a href=https://rexai.top/tags/%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/>æœ€ä½³å®è·µ</a></li><li><a href=https://rexai.top/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/>æ€§èƒ½ä¼˜åŒ–</a></li></ul></footer></article></main><footer class=footer><span>Â© <a href=https://rexai.top/>æ¢¦å…½ç¼–ç¨‹</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>